import{j as o}from"./jsx-runtime.D_zvdyIk.js";import{g as O}from"./slot.Dc8ja7ZA.js";import{P as $,u as z}from"./use-controlled-state.CxrLW6JS.js";import{r as u}from"./index.DxhH1ShK.js";import{c as G,P as I,d as K,a as S,e as w}from"./index.TaQMmt2C.js";import{u as U}from"./index.DXWCtkbr.js";import{u as X}from"./index.3ks74Brc.js";import{m as y}from"./proxy.D4YeN7SK.js";var j="Checkbox",[V]=G(j),[W,R]=V(j);function J(e){const{__scopeCheckbox:n,checked:s,children:d,defaultChecked:r,disabled:t,form:l,name:h,onCheckedChange:a,required:p,value:b="on",internal_do_not_use_render:f}=e,[k,v]=K({prop:s,defaultProp:r??!1,onChange:a,caller:j}),[x,m]=u.useState(null),[g,c]=u.useState(null),i=u.useRef(!1),E=x?!!l||!!x.closest("form"):!0,P={checked:k,disabled:t,setChecked:v,control:x,setControl:m,name:h,form:l,value:b,hasConsumerStoppedPropagationRef:i,required:p,defaultChecked:C(r)?!1:r,isFormControl:E,bubbleInput:g,setBubbleInput:c};return o.jsx(W,{scope:n,...P,children:Q(f)?f(P):d})}var L="CheckboxTrigger",N=u.forwardRef(({__scopeCheckbox:e,onKeyDown:n,onClick:s,...d},r)=>{const{control:t,value:l,disabled:h,checked:a,required:p,setControl:b,setChecked:f,hasConsumerStoppedPropagationRef:k,isFormControl:v,bubbleInput:x}=R(L,e),m=S(r,b),g=u.useRef(a);return u.useEffect(()=>{const c=t?.form;if(c){const i=()=>f(g.current);return c.addEventListener("reset",i),()=>c.removeEventListener("reset",i)}},[t,f]),o.jsx(I.button,{type:"button",role:"checkbox","aria-checked":C(a)?"mixed":a,"aria-required":p,"data-state":D(a),"data-disabled":h?"":void 0,disabled:h,value:l,...d,ref:m,onKeyDown:w(n,c=>{c.key==="Enter"&&c.preventDefault()}),onClick:w(s,c=>{f(i=>C(i)?!0:!i),x&&v&&(k.current=c.isPropagationStopped(),k.current||c.stopPropagation())})})});N.displayName=L;var B=u.forwardRef((e,n)=>{const{__scopeCheckbox:s,name:d,checked:r,defaultChecked:t,required:l,disabled:h,value:a,onCheckedChange:p,form:b,...f}=e;return o.jsx(J,{__scopeCheckbox:s,checked:r,defaultChecked:t,disabled:h,required:l,onCheckedChange:p,name:d,form:b,value:a,internal_do_not_use_render:({isFormControl:k})=>o.jsxs(o.Fragment,{children:[o.jsx(N,{...f,ref:n,__scopeCheckbox:s}),k&&o.jsx(A,{__scopeCheckbox:s})]})})});B.displayName=j;var M="CheckboxIndicator",T=u.forwardRef((e,n)=>{const{__scopeCheckbox:s,forceMount:d,...r}=e,t=R(M,s);return o.jsx($,{present:d||C(t.checked)||t.checked===!0,children:o.jsx(I.span,{"data-state":D(t.checked),"data-disabled":t.disabled?"":void 0,...r,ref:n,style:{pointerEvents:"none",...e.style}})})});T.displayName=M;var q="CheckboxBubbleInput",A=u.forwardRef(({__scopeCheckbox:e,...n},s)=>{const{control:d,hasConsumerStoppedPropagationRef:r,checked:t,defaultChecked:l,required:h,disabled:a,name:p,value:b,form:f,bubbleInput:k,setBubbleInput:v}=R(q,e),x=S(s,v),m=U(t),g=X(d);u.useEffect(()=>{const i=k;if(!i)return;const E=window.HTMLInputElement.prototype,_=Object.getOwnPropertyDescriptor(E,"checked").set,F=!r.current;if(m!==t&&_){const H=new Event("click",{bubbles:F});i.indeterminate=C(t),_.call(i,C(t)?!1:t),i.dispatchEvent(H)}},[k,m,t,r]);const c=u.useRef(C(t)?!1:t);return o.jsx(I.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??c.current,required:h,disabled:a,name:p,value:b,form:f,...n,tabIndex:-1,ref:x,style:{...n.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});A.displayName=q;function Q(e){return typeof e=="function"}function C(e){return e==="indeterminate"}function D(e){return C(e)?"indeterminate":e?"checked":"unchecked"}const[Y,Z]=O("CheckboxContext");function ie({defaultChecked:e,checked:n,onCheckedChange:s,disabled:d,required:r,name:t,value:l,...h}){const[a,p]=z({value:n,defaultValue:e,onChange:s});return o.jsx(Y,{value:{isChecked:a,setIsChecked:p},children:o.jsx(B,{defaultChecked:e,checked:n,onCheckedChange:p,disabled:d,required:r,name:t,value:l,asChild:!0,children:o.jsx(y.button,{"data-slot":"checkbox",whileTap:{scale:.95},whileHover:{scale:1.05},...h})})})}function de(e){const{isChecked:n}=Z();return o.jsx(T,{forceMount:!0,asChild:!0,children:o.jsx(y.svg,{"data-slot":"checkbox-indicator",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"3.5",stroke:"currentColor",initial:"unchecked",animate:n?"checked":"unchecked",...e,children:n==="indeterminate"?o.jsx(y.line,{x1:"5",y1:"12",x2:"19",y2:"12",strokeLinecap:"round",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1,transition:{duration:.2}}}):o.jsx(y.path,{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5",variants:{checked:{pathLength:1,opacity:1,transition:{duration:.2,delay:.2}},unchecked:{pathLength:0,opacity:0,transition:{duration:.2}}}})})})}export{ie as C,de as a};
