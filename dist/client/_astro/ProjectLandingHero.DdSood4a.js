import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as i}from"./index.DxhH1ShK.js";import{B as U}from"./BlurText.D-ox_uc4.js";import{g as p}from"./icon.DFuhwfpy.js";import{C as h}from"./Tooltip.BWGh4r1w.js";import{C as u}from"./Link.k33VB9n9.js";import{B as L}from"./Badge.CwoN8wRJ.js";import{B as o}from"./Button.CuXyr_i0.js";import{u as P}from"./galaxy.DW2RRtdf.js";import{a as _}from"./auth.C6MmFFld.js";import{A as H}from"./index.CG_O7YBG.js";import{m as A}from"./proxy.D4YeN7SK.js";import"./index.C2SuE_cr.js";import"./index.CqUFkXl9.js";import"./slot.Dc8ja7ZA.js";import"./utils.Lr0IsqiS.js";import"./clsx.B-dksMZM.js";import"./ElectricBorder.BANsXwQj.js";import"./ripple.MQee5g1d.js";import"./eventTypes.j192VUKf.js";import"./virtual.VUcB3V37.js";import"./client.B9YBqyHK.js";const de=({projectData:M,projectUri:b,githubUrl:g,blockchainExplorerUrl:y,documentationUrl:j,readmeContent:C,readmeUpdateTime:D,readmeUrl:V,tags:f,projectId:l})=>{const{title:$,description:k}=M,[w,v]=i.useState(!1),[r,N]=i.useState(!1),[c,T]=i.useState(C||""),[d,S]=i.useState(D),[m,B]=i.useState(!1);i.useEffect(()=>{(async()=>{const n=await _.getSession();B(!!n?.data?.user)})()},[]);const F=t=>t?t.replace(/```(\w+)?\n?([\s\S]*?)```/gim,(s,R,a)=>`<pre class="bg-slate-100 dark:bg-slate-800 p-4 rounded overflow-x-auto my-4"><code class="text-sm">${a.trim()}</code></pre>`).replace(/^### (.*$)/gim,'<h3 class="text-2xl font-bold mt-6 mb-3 text-slate-800 dark:text-slate-200">$1</h3>').replace(/^## (.*$)/gim,'<h2 class="text-3xl font-bold mt-8 mb-4 text-slate-800 dark:text-slate-200">$1</h2>').replace(/^# (.*$)/gim,'<h1 class="text-4xl font-bold mt-10 mb-5 text-slate-800 dark:text-slate-200">$1</h1>').replace(/\*\*(.*?)\*\*/gim,'<strong class="font-semibold">$1</strong>').replace(/\[([^\]]+)\]\(([^)]+)\)/gim,'<a href="$2" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">$1</a>').replace(/`([^`\n]+)`/gim,'<code class="bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded text-sm font-mono">$1</code>').split(/\n\n+/).map(s=>s.trim()).filter(s=>s.length>0).map(s=>(s=s.replace(/\n/g,"<br>"),`<p class="mb-4 leading-relaxed text-slate-700 dark:text-slate-300">${s}</p>`)).join("")||"<p>No content</p>":"",x=async()=>{if(l){N(!0);try{const t=await P(l);t.success&&t.data?(T(t.data.readmeContent||""),S(t.data.readmeUpdateTime),!w&&t.data.readmeContent):alert(t.error||"Failed to fetch README. Make sure you are the project maintainer.")}catch(t){console.error("Error fetching README:",t),alert("An error occurred while fetching README. Please try again.")}finally{N(!1)}}},E=t=>{if(!t)return"Unknown";const n=new Date(t*1e3),R=new Date().getTime()-n.getTime(),a=Math.floor(R/(1e3*60*60*24));return a===0?"Today":a===1?"Yesterday":a<7?`${a} days ago`:a<30?`${Math.floor(a/7)} weeks ago`:a<365?`${Math.floor(a/30)} months ago`:`${Math.floor(a/365)} years ago`};return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center space-y-8 px-4 relative",children:[e.jsxs("div",{className:"w-full max-w-4xl relative",children:[e.jsx(U,{text:$,className:"text-6xl md:text-7xl lg:text-8xl font-bold text-slate-800 dark:text-slate-200 justify-center",animateBy:"words",direction:"top",delay:100}),f&&f.length>0&&e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 flex flex-wrap items-center justify-center gap-2 w-full",children:f.map((t,n)=>e.jsx(L,{variant:"purple",className:"text-xs px-2 py-1 opacity-80 hover:opacity-100 transition-opacity",children:t},n))})]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 flex-wrap",children:[b&&e.jsx(u,{uri:b,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/10 dark:bg-slate-900/10 backdrop-blur-sm border border-slate-200/20 dark:border-slate-700/20 hover:bg-white/20 dark:hover:bg-slate-900/20 transition-colors",children:e.jsx(h,{content:"Show project issues",children:e.jsxs("div",{className:"flex items-center gap-2",children:[p({iconType:"ara",className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Issues"})]})})}),g&&e.jsx(u,{uri:g,asNewTab:!0,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/10 dark:bg-slate-900/10 backdrop-blur-sm border border-slate-200/20 dark:border-slate-700/20 hover:bg-white/20 dark:hover:bg-slate-900/20 transition-colors",children:e.jsx(h,{content:"Source",children:e.jsxs("div",{className:"flex items-center gap-2",children:[p({iconType:"github",className:"w-5 h-5 text-slate-700 dark:text-slate-300"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Source"})]})})}),y&&e.jsx(u,{uri:y,asNewTab:!0,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/10 dark:bg-slate-900/10 backdrop-blur-sm border border-slate-200/20 dark:border-slate-700/20 hover:bg-white/20 dark:hover:bg-slate-900/20 transition-colors",children:e.jsx(h,{content:"Blockchain Explorer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[p({iconType:"wallet",className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Explorer"})]})})}),j&&e.jsx(u,{uri:j,asNewTab:!0,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/10 dark:bg-slate-900/10 backdrop-blur-sm border border-slate-200/20 dark:border-slate-700/20 hover:bg-white/20 dark:hover:bg-slate-900/20 transition-colors",children:e.jsx(h,{content:"Documentation",children:e.jsxs("div",{className:"flex items-center gap-2",children:[p({iconType:"new-file",className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200",children:"Docs"})]})})})]}),e.jsx("div",{className:"w-full max-w-4xl relative min-h-[200px]",children:e.jsx(H,{mode:"wait",children:w?e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"w-full text-left",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx(o,{onClick:()=>v(!1),variant:"secondary",children:"View short description"}),l&&m&&e.jsx(o,{onClick:x,disabled:r,variant:"success",children:r?"Updating...":"Update README"})]}),d&&e.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:["Last updated: ",E(d)]}),c?e.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:F(c)}}):e.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[e.jsx("p",{className:"mb-4",children:"No README content available"}),l&&m&&e.jsx(o,{onClick:x,disabled:r,variant:"success",children:r?"Fetching README...":"Fetch README"})]})]},"readme"):e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"w-full",children:[k&&e.jsx("p",{className:"text-xl md:text-3xl text-slate-600 dark:text-slate-400 leading-relaxed",children:k}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[c?e.jsx(o,{onClick:()=>v(!0),variant:"secondary",outline:!0,children:"View README"}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-2",children:"No README content available"}),l&&m&&e.jsx(o,{onClick:x,disabled:r,variant:"secondary",outline:!0,children:r?"Fetching README...":"Fetch README"})]}),l&&m&&c&&e.jsx(o,{onClick:x,disabled:r,variant:"secondary",outline:!0,size:"sm",children:r?"Updating...":"Update README"})]}),d&&e.jsxs("p",{className:"text-xs text-center text-slate-500 dark:text-slate-400",children:["Last updated: ",E(d)]})]})]},"description")})})]})};export{de as default};
