import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.DxhH1ShK.js";import{B as m}from"./Badge.CwoN8wRJ.js";import{D as E,g as D,a as M,c as R,o as $}from"./demo.CHhf2w8G.js";import{P as G}from"./PageLikePanel.guWiuL_Q.js";import{C as N}from"./Link.k33VB9n9.js";import{B as k}from"./Button.CuXyr_i0.js";import{g as L}from"./icon.DFuhwfpy.js";import{c as P}from"./confetti.module.Cx83yTHA.js";import{C as _}from"./Tooltip.BWGh4r1w.js";import{c as S}from"./utils.Lr0IsqiS.js";import{L as z}from"./login-require-for-panel.DZxTNES6.js";import{m as F}from"./proxy.D4YeN7SK.js";import{N as O}from"./NumberFlow-client-48rw3j0J.DO-Ted3l.js";import"./virtual.VUcB3V37.js";import"./client.B9YBqyHK.js";import"./Panel.BDrWh8LJ.js";import"./eventTypes.j192VUKf.js";import"./ripple.MQee5g1d.js";import"./slot.Dc8ja7ZA.js";import"./accordion.CkcBKuZR.js";import"./accordion.Du3ry5_a.js";import"./use-controlled-state.CxrLW6JS.js";import"./index.TaQMmt2C.js";import"./index.C2SuE_cr.js";import"./index.CqUFkXl9.js";import"./index.pjxe1RjL.js";import"./index.CG_O7YBG.js";import"./createLucideIcon.C1tpinp8.js";import"./PanelAction.DEFdBo1-.js";import"./ElectricBorder.BANsXwQj.js";import"./clsx.B-dksMZM.js";import"./auth.C6MmFFld.js";const I=({isOpen:t,sunshines:s,galaxyId:f,projectName:o,uri:l,onClose:c})=>{const[g,j]=a.useState(!1);return a.useEffect(()=>{if(t&&!g){let b=function(r,w){return Math.random()*(w-r)+r};j(!0);const x=3e3,n=Date.now()+x,v={startVelocity:30,spread:360,ticks:60,zIndex:9999},u=setInterval(function(){const r=n-Date.now();if(r<=0){clearInterval(u);return}const w=50*(r/x);P({...v,particleCount:w,origin:{x:b(.1,.3),y:Math.random()-.2}}),P({...v,particleCount:w,origin:{x:b(.7,.9),y:Math.random()-.2}})},250)}},[t,g]),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black/50 backdrop-blur-sm z-[100]",onClick:c}),e.jsx("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[101] flex items-center justify-center w-full max-w-2xl px-4",children:e.jsx(G,{title:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[L({iconType:"sunshine",className:"w-8 h-8 text-yellow-500 dark:text-yellow-400"}),e.jsx("span",{className:"text-2xl font-semibold text-slate-800 dark:text-slate-200",children:s.toFixed(1)})]}),titleCenter:!0,children:e.jsxs("div",{className:"space-y-6",children:[o&&e.jsx("div",{className:"text-center",children:e.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-slate-200",children:o})}),e.jsx("div",{className:"text-slate-600 dark:text-slate-400 text-center space-y-2",children:e.jsxs("p",{className:"text-base",children:["These sunshines are possible to convert into"," ",o&&l?e.jsx(N,{uri:l,className:"font-semibold text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300",children:o}):e.jsx("span",{className:"font-semibold",children:o||"this project"})," ","stars"," ",e.jsx("span",{className:"inline-flex items-center",children:L({iconType:"star-filled",className:"w-5 h-5 text-yellow-500 dark:text-yellow-400 animate-pulse"})})]})}),e.jsxs("div",{className:"flex justify-center items-center gap-4",children:[e.jsx("p",{className:"text-base",children:"Next step"}),e.jsx(N,{uri:l||`/project/issues?galaxy=${f}`,children:e.jsx(k,{variant:"primary",size:"md",children:"Create an issue"})})]})]})})})]}):null},A=({title:t,tooltipContent:s,hintText:f,buttonText:o,buttonLoadingText:l="Processing...",buttonVariant:c="primary",buttonSize:g="lg",buttonClassName:j,onClick:b,uri:x,isLoading:n=!1,disabled:v=!1})=>{const[u,r]=a.useState(!1);return e.jsx(z,{children:e.jsxs(F.div,{className:S("relative w-full max-w-md mx-auto mt-1","backdrop-blur-md bg-white/20 dark:bg-slate-900/20","border border-slate-200/30 dark:border-slate-700/30","rounded-lg p-6","transition-all duration-300","hover:bg-white/30 dark:hover:bg-slate-900/30","hover:border-slate-300/50 dark:hover:border-slate-600/50","hover:shadow-xl hover:shadow-blue-500/20"),onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),animate:{scale:u?1.02:1,y:u?-4:0},transition:{type:"spring",stiffness:300,damping:20},children:[u&&e.jsx(F.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 rounded-lg pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:t}),s&&e.jsx(_,{content:s,children:e.jsx("span",{className:"flex items-center gap-1 cursor-help",children:L({iconType:"info",className:"w-4 h-4"})})})]}),f&&e.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400 h-6",children:f}),x?e.jsx(N,{uri:x,children:e.jsx(k,{variant:c,size:g,className:S("w-full text-shadow-lg",j),disabled:v||n,children:n?l:o})}):e.jsx(k,{variant:c,size:g,className:S("w-full text-shadow-lg",j),onClick:b,disabled:v||n,children:n?l:o})]})]})})},Te=({galaxyId:t,projectName:s})=>{const[f,o]=a.useState(void 0),[l,c]=a.useState(!1),[g,j]=a.useState(!0),[b,x]=a.useState(!1),[n,v]=a.useState(null),u=e.jsx("div",{className:"text-sm max-w-xs",children:e.jsxs("p",{children:["- Obtain sunshines, collaborate with maintainer on project issues. ",e.jsx("br",{}),"- Turn sunshines to stars.",e.jsx("br",{}),"- Grow stars and turn it into a community owned project.",e.jsx("br",{}),"- The project will be owned by the community when it reaches 100 stars."]})});a.useEffect(()=>{(async()=>{const p=D();if(p.email)try{const d=await M(p.email);d!==null&&o(d)}catch(d){console.error("Error fetching demo step:",d)}finally{j(!1)}else j(!1)})()},[]),a.useEffect(()=>{const i=p=>{const d=p;d.detail?.step!==void 0&&o(d.detail.step)};return window.addEventListener(E.DEMO_STEP_INCREMENTED,i),()=>{window.removeEventListener(E.DEMO_STEP_INCREMENTED,i)}},[]);const r=async()=>{c(!0);try{const i=D();if(!i.email||!i.users){console.error("Demo not found"),c(!1);return}i.role!=="user"&&R("user");const p=i.users.find(C=>C.role==="user")||i.users[0];if(!p||!p._id){console.error("User not found"),c(!1);return}const d=`/project/issues?galaxy=${t}`,T=await $({galaxyId:t,userId:p._id.toString(),email:i.email});if(T.success&&T)v({sunshines:T.sunshines||0,totalSunshines:T.totalSunshines||0,galaxyId:t,projectName:s,uri:d}),x(!0),o(1);else{const C=T.error||"Failed to obtain sunshines";console.error("Failed to obtain sunshines:",C),alert(C)}}catch(i){console.error("Error obtaining sunshines:",i),alert("An error occurred while obtaining sunshines")}finally{c(!1)}},w=a.useMemo(()=>[{title:"Join this open source project",tooltipContent:u,hintText:e.jsxs(e.Fragment,{children:[e.jsx(m,{children:"demo"})," donating",e.jsx(O,{value:50,locales:"en-US",format:{style:"currency",currency:"USD",maximumFractionDigits:2}})," to '",s,"' maintainer."]}),buttonText:"Obtain Sunshines",buttonLoadingText:"Processing...",onClick:r},{title:"Create an issue",tooltipContent:e.jsx("div",{className:"text-sm max-w-xs",children:e.jsx("p",{children:"Create an issue to collaborate with the maintainer on the project."})}),hintText:e.jsxs(e.Fragment,{children:[e.jsx(m,{children:"demo"})," Create an issue for '",s,"' project."]}),buttonText:"Go to Issues",buttonLoadingText:"Loading...",uri:`/project/issues?galaxy=${t}`},{title:"Assign a contributor",tooltipContent:e.jsx("div",{className:"text-sm max-w-xs",children:e.jsx("p",{children:"Switch to maintainer role (top right), then assign yourself as contributor to work on the issue you created."})}),hintText:e.jsxs(e.Fragment,{children:[e.jsx(m,{children:"demo"})," Switch to maintainer role, then assign a contributor to work on '",s,"' issues."]}),buttonText:"Go to Issues",buttonLoadingText:"Loading...",uri:`/project/issues?galaxy=${t}`},{title:"Create version",tooltipContent:e.jsx("div",{className:"text-sm max-w-xs",children:e.jsx("p",{children:"Create a new version in the roadmap to organize your work."})}),hintText:e.jsxs(e.Fragment,{children:[e.jsx(m,{children:"demo"})," Create a version for '",s,"' project."]}),buttonText:"Go to Roadmap",buttonLoadingText:"Loading...",uri:`/project/roadmap?galaxy=${t}`},{title:"Patch issue",tooltipContent:e.jsx("div",{className:"text-sm max-w-xs",children:e.jsx("p",{children:"Move the issue to the patcher to create a patch for it."})}),hintText:e.jsxs(e.Fragment,{children:[e.jsx(m,{children:"demo"})," Patch issue for '",s,"' project."]}),buttonText:"Go to Roadmap",buttonLoadingText:"Loading...",uri:`/project/roadmap?galaxy=${t}`},{title:"Complete version",tooltipContent:e.jsx("div",{className:"text-sm max-w-xs",children:e.jsx("p",{children:"Mark all patches as complete and mark the version as complete."})}),hintText:e.jsxs(e.Fragment,{children:[e.jsx(m,{children:"demo"})," Complete '",s,"' version."]}),buttonText:"Go to Roadmap",buttonLoadingText:"Loading...",uri:`/project/roadmap?galaxy=${t}`},{title:"Test version",tooltipContent:e.jsx("div",{className:"text-sm max-w-xs",children:e.jsx("p",{children:"Test the patched issue in the version."})}),hintText:e.jsxs(e.Fragment,{children:[e.jsx(m,{children:"demo"})," Test the '",s,"' version."]}),buttonText:"Go to Roadmap",buttonLoadingText:"Loading...",uri:`/project/roadmap?galaxy=${t}`},{title:"Release",tooltipContent:e.jsx("div",{className:"text-sm max-w-xs",children:e.jsx("p",{children:"Release the tested version to make it available."})}),hintText:e.jsxs(e.Fragment,{children:[e.jsx(m,{children:"demo"})," Release '",s,"' version."]}),buttonText:"Go to Roadmap",buttonLoadingText:"Loading...",uri:`/project/roadmap?galaxy=${t}`},{title:"Place your star in the galaxy",tooltipContent:e.jsx("div",{className:"text-sm max-w-xs",children:e.jsx("p",{children:"Place your star in the galaxy to show your contribution."})}),hintText:e.jsxs(e.Fragment,{children:[e.jsx(m,{children:"demo"})," Place your star in the '",s,"' galaxy."]}),buttonText:"Place Star",buttonLoadingText:"Loading...",uri:`/project?galaxy=${t}&place=true`}],[t,s,u,r]),y=f!==void 0?f:0,h=w[Math.min(y===0?1:y,w.length-1)];return g?e.jsx("div",{className:"w-full max-w-md mx-auto mt-1 p-6 text-center",children:e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading..."})}):y===0?null:e.jsxs(e.Fragment,{children:[h&&e.jsx(A,{title:h.title,tooltipContent:h.tooltipContent,hintText:h.hintText,buttonText:h.buttonText,buttonLoadingText:h.buttonLoadingText,onClick:h.onClick,uri:h.uri,isLoading:l&&y===0,disabled:l}),b&&n&&e.jsx(I,{isOpen:b,sunshines:n.sunshines,totalSunshines:n.totalSunshines,galaxyId:n.galaxyId,projectName:n.projectName,uri:n.uri,onClose:()=>x(!1)})]})};export{Te as default};
