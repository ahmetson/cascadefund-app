import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as p,R as _}from"./index.DxhH1ShK.js";import{C as q}from"./ControlPanel.Ck-8xG2n.js";import{g as M}from"./icon.Df9DBUhx.js";import{S as Z}from"./SearchBar.B8HCoSqH.js";import{C as B}from"./Tooltip.CRI7KqtE.js";import{c as T}from"./utils.BnlJtBIq.js";import{B as $}from"./Button.BK-c6KtM.js";import{m as R}from"./proxy.D4YeN7SK.js";import{A as Q}from"./index.CG_O7YBG.js";import{P as G}from"./PageLikePanel.Dipvl2FS.js";import{I as V}from"./Input.BhPYPo8a.js";import{b as J,c as K,d as X}from"./galaxy.DW2RRtdf.js";import{B as U}from"./Badge.CwoN8wRJ.js";import{C as ee}from"./Link.BGo-y1Vn.js";import{N as W}from"./NumberFlow-client-48rw3j0J.DO-Ted3l.js";import{E as O}from"./ElectricBorder.DAWLx7iV.js";import{a as te}from"./auth.C6MmFFld.js";import{a as se}from"./star.J0JRTi5O.js";import{a as ae}from"./virtual.VUcB3V37.js";import{P as re,a as ne,b as ie,c as oe,d as le,e as ce}from"./PopoverArrow.BaWnEbH-.js";import{P as de}from"./PopoverTitle.CfIfYysC.js";import{P as me}from"./PopoverDescription.C4Eu5Fxu.js";import"./Panel.BFyw-rTz.js";import"./ripple.8VKTSqqU.js";import"./slot.RkfkL2mj.js";import"./index.C2SuE_cr.js";import"./index.CqUFkXl9.js";import"./accordion.Dr61eiHV.js";import"./accordion.CpVAuD1l.js";import"./useControlledState.CmDsCfE3.js";import"./index.DpQ8kv17.js";import"./index.Du2_2VfY.js";import"./createLucideIcon.C1tpinp8.js";import"./PanelAction.a_cGOObt.js";import"./client.B9YBqyHK.js";function pe({children:t,initialStep:l=1,onStepChange:n=()=>{},onBeforeStepChange:a,onFinalStepCompleted:m=()=>{},stepCircleContainerClassName:o="",stepContainerClassName:i="",contentClassName:s="",footerClassName:c="",backButtonProps:x={},nextButtonProps:f={},backButtonText:u="Back",nextButtonText:k="Continue",disableStepIndicators:C=!1,renderStepIndicator:P,...v}){const[d,S]=p.useState(l),[j,h]=p.useState(0),g=p.Children.toArray(t),y=g.length,w=d>y,N=d===y,L=r=>{S(r),r>y?m():n(r)},E=()=>{if(d>1){const r=d-1;if(a&&a(d,r)===!1)return;h(-1),L(r)}},F=()=>{if(!N){const r=d+1;if(a&&a(d,r)===!1)return;h(1),L(r)}},z=()=>{h(1),L(y+1)};return e.jsx("div",{className:"flex min-h-full flex-1 flex-col items-center justify-center p-4 sm:aspect-[4/3] md:aspect-[2/1]",...v,children:e.jsxs("div",{className:`mx-auto w-full rounded-xs shadow-xl border border-slate-300 dark:border-slate-700 ${o}`,children:[e.jsx("div",{className:`${i} flex w-full items-center p-8`,children:g.map((r,b)=>{const A=b+1,Y=b<y-1;return e.jsxs(_.Fragment,{children:[P?P({step:A,currentStep:d,onStepClick:D=>{a&&a(d,D)===!1||(h(D>d?1:-1),L(D))}}):e.jsx(ge,{step:A,disableStepIndicators:C,currentStep:d,onClickStep:D=>{a&&a(d,D)===!1||(h(D>d?1:-1),L(D))}}),Y&&e.jsx(fe,{isComplete:d>A})]},A)})}),e.jsx(xe,{isCompleted:w,currentStep:d,direction:j,className:`space-y-2 px-8 ${s}`,children:g[d-1]}),!w&&e.jsx("div",{className:`px-8 pb-8 ${c}`,children:e.jsxs("div",{className:`mt-10 flex ${d!==1?"justify-between":"justify-end"}`,children:[d!==1&&e.jsx($,{variant:"secondary",onClick:r=>{E(),x.onClick&&r&&x.onClick(r)},className:`duration-350 rounded px-2 py-1 transition ${d===1?"pointer-events-none opacity-50 text-neutral-400 dark:text-neutral-500":"text-neutral-400 dark:text-neutral-500 hover:text-neutral-700 dark:hover:text-neutral-300"}`,...Object.fromEntries(Object.entries(x).filter(([r])=>r!=="onClick")),children:u}),e.jsx($,{variant:"primary",onClick:r=>{N?z():F(),f.onClick&&r&&f.onClick(r)},className:"duration-350 flex items-center justify-center py-1.5 px-3.5 font-medium tracking-tight transition",...Object.fromEntries(Object.entries(f).filter(([r])=>r!=="onClick")),children:N?"Complete":k})]})})]})})}function xe({isCompleted:t,currentStep:l,direction:n,children:a,className:m=""}){const[o,i]=p.useState(0);return e.jsx(R.div,{style:{position:"relative",overflow:"hidden"},animate:{height:t?0:o},transition:{type:"spring",duration:.4},className:m,children:e.jsx(Q,{initial:!1,mode:"sync",custom:n,children:!t&&e.jsx(ue,{direction:n,onHeightReady:s=>i(s),children:a},l)})})}function ue({children:t,direction:l,onHeightReady:n}){const a=p.useRef(null);return p.useLayoutEffect(()=>{a.current&&n(a.current.offsetHeight)},[t,n]),e.jsx(R.div,{ref:a,custom:l,variants:he,initial:"enter",animate:"center",exit:"exit",transition:{duration:.4},style:{position:"absolute",left:0,right:0,top:0},children:t})}const he={enter:t=>({x:t>=0?"-100%":"100%",opacity:0}),center:{x:"0%",opacity:1},exit:t=>({x:t>=0?"50%":"-50%",opacity:0})};function ge({step:t,currentStep:l,onClickStep:n,disableStepIndicators:a=!1}){const m=l===t?"active":l<t?"inactive":"complete",o=()=>{t!==l&&!a&&n(t)};return e.jsx(R.div,{onClick:o,className:"relative cursor-pointer outline-none focus:outline-none",animate:m,initial:!1,children:e.jsx(R.div,{variants:{inactive:{scale:1,backgroundColor:"#22222",color:"#a3a3a3"},active:{scale:1,backgroundColor:"#5227FF",color:"#5227FF"},complete:{scale:1,backgroundColor:"#5227FF",color:"#3b82f6"}},transition:{duration:.3},className:"flex h-8 w-8 items-center justify-center rounded-full font-semibold border border-slate-300 dark:border-slate-600 bg-slate-100 dark:bg-slate-800",children:m==="complete"?e.jsx(ye,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):m==="active"?e.jsx("div",{className:"h-3 w-3 rounded-full bg-sky-500 dark:bg-sky-400"}):e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:t})})})}function fe({isComplete:t}){const l={incomplete:{width:0,backgroundColor:"transparent"},complete:{width:"100%",backgroundColor:"#5227FF"}};return e.jsx("div",{className:"relative mx-2 h-0.5 flex-1 overflow-hidden rounded bg-neutral-300 dark:bg-neutral-700",children:e.jsx(R.div,{className:"absolute left-0 top-0 h-full",variants:l,initial:!1,animate:t?"complete":"incomplete",transition:{duration:.4}})})}function ye(t){return e.jsx("svg",{...t,fill:"none",stroke:"currentColor",strokeWidth:2,viewBox:"0 0 24 24",children:e.jsx(R.path,{initial:{pathLength:0},animate:{pathLength:1},transition:{delay:.1,type:"tween",ease:"easeOut",duration:.3},strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}const be=({gitUrl:t="",onGitUrlChange:l,error:n})=>e.jsx(G,{icon:"new-file",titleCenter:!0,title:"Add Git Repository",interactive:!1,children:e.jsxs("div",{className:"mb-4 px-1",children:[e.jsx("label",{htmlFor:"git-url",className:"block text-sm text-slate-700 dark:text-slate-300 mb-2",children:"Repository URL"}),e.jsx(V,{id:"git-url",type:"text",value:t,onChange:a=>{l?.(a.target.value)},placeholder:"https://github.com/username/repository or git@github.com:username/repository.git",className:"w-full"}),e.jsx("p",{className:"mt-2 text-md text-slate-600 dark:text-slate-400",children:"Accepts https, ssh git repo (usually ends with .git). Supports GitHub and GitLab only."}),n&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:n})]})}),je=({percentage:t,color:l="blue"})=>{const n={green:"bg-green-500",blue:"bg-blue-500",purple:"bg-purple-500",red:"bg-red-500",yellow:"bg-yellow-500"};return e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${n[l]}`,style:{width:`${t}%`}})})},I=({title:t,description:l,status:n,progress:a})=>{const m=()=>{switch(n){case"completed":return e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M20 6L9 17L4 12",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})});case"in-progress":return e.jsxs("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full ml-0.5"})]});default:return e.jsx("div",{className:"w-6 h-6 bg-gray-300 rounded-full"})}};return e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:m()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-base font-medium text-gray-800 mb-1",children:t}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:l}),e.jsx(je,{percentage:a})]})]})},ke=({gitUrl:t,onComplete:l,onError:n})=>{const[a,m]=p.useState([{id:1,title:"Analyzing metadata",description:"Fetching repository information...",status:"in-progress",progress:0},{id:2,title:"Discovering Social Links",description:"Discovering project social links...",status:"pending",progress:0},{id:3,title:"Detecting license",description:"Analyzing license information...",status:"pending",progress:0},{id:4,title:"Detecting dependency tree using SBOM",description:"Building dependency graph...",status:"pending",progress:0}]);p.useEffect(()=>{(async()=>{const s=(h,g,y,w,N="in-progress")=>new Promise(L=>{setTimeout(()=>{o(h,N,g,w),L()},y)}),c=(h,g)=>Math.floor(Math.random()*(g-h+1))+h,x=c(300,1600),f=c(400,2e3),u=c(500,2400),k=c(600,2e3);o(1,"in-progress",0,"Fetching repository metadata..."),o(2,"in-progress",0,"Discovering project links..."),o(3,"in-progress",0,"Analyzing license..."),o(4,"in-progress",0,"Building dependency tree...");const C=s(1,100,x,"Repository metadata retrieved","completed"),P=s(2,100,f,"Project links discovered","completed"),v=s(3,100,u,"Analyzing license...","completed"),d=s(4,99,k,"Building dependency tree...","in-progress"),S=J(t),[j]=await Promise.all([S,d]);if(!j.success){n(j.error||"Failed to analyze repository");return}return j.data?.license&&o(3,"completed",100,`License detected: ${j.data.license.license||j.data.license}`),o(4,"completed",100,"Dependency analysis complete"),await Promise.all([C,P,v]),await new Promise(h=>setTimeout(h,250)),j.data})().then(s=>{s?l(s):n("Failed to analyze repository")}).catch(s=>{console.error("Error analyzing repository:",s),n(s instanceof Error?s.message:"An error occurred")})},[]);const o=(i,s,c,x)=>{m(f=>f.map(u=>u.id===i?{...u,status:s,progress:c,description:x}:u))};return e.jsxs(G,{title:e.jsxs("div",{className:"flex justify-left items-center gap-2",children:[e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"#10B981",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("span",{children:"Analyzing Repository"})]}),interactive:!1,children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"We're analyzing your Git repository and gathering information. This process may take a few moments."}),e.jsx("div",{className:"space-y-6 mb-8",children:a.map(i=>e.jsx(I,{title:i.title,description:i.description,status:i.status,progress:i.progress},i.id))})]})},ve=({repositoryData:t,readmeContent:l,onComplete:n,onError:a})=>{const[m,o]=p.useState([{id:1,title:"Creating galaxy",description:"Initializing galaxy creation...",status:"in-progress",progress:0},{id:2,title:"AI analyzing name, description and tags",description:"Generating galaxy metadata with AI...",status:"pending",progress:0},{id:3,title:"Creating database record",description:"Saving galaxy to database...",status:"pending",progress:0},{id:4,title:"Created",description:"Galaxy creation complete",status:"pending",progress:0}]);p.useEffect(()=>{(async()=>{const c=(g,y,w,N,L="in-progress")=>new Promise(E=>{setTimeout(()=>{i(g,L,y,N),E()},w)}),x=(g,y)=>Math.floor(Math.random()*(y-g+1))+g,f=x(300,2400),u=x(400,3e3),k=x(500,3600),C=x(600,3e3);i(1,"in-progress",0,"Preparing galaxy data..."),i(2,"in-progress",0,"AI analyzing project..."),i(3,"in-progress",0,"Saving to database..."),i(4,"in-progress",0,"Finalizing...");const P=c(1,100,f,"Galaxy data prepared","completed"),v=c(2,99,C,"AI analyzing project...","in-progress"),d=c(3,100,u,"Database record created","completed"),S=c(4,100,k,"Galaxy created successfully","completed"),j=K(t,l),[h]=await Promise.all([j,v]);if(!h.success){a(h.error||"Failed to create galaxy");return}return i(2,"completed",100,"AI analysis complete"),await Promise.all([P,d,S]),await new Promise(g=>setTimeout(g,250)),h.data})().then(c=>{c?n(c):a("Failed to create galaxy")}).catch(c=>{a(c instanceof Error?c.message:"An error occurred")})},[]);const i=(s,c,x,f)=>{o(u=>u.map(k=>k.id===s?{...k,status:c,progress:x,description:f}:k))};return e.jsxs(G,{title:e.jsxs("div",{className:"flex justify-left items-center gap-2",children:[e.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{children:"Creating Galaxy"})]}),interactive:!1,children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Creating your galaxy with AI-powered analysis. This may take a moment."}),e.jsx("div",{className:"space-y-6 mb-8",children:m.map(s=>e.jsx(I,{title:s.title,description:s.description,status:s.status,progress:s.progress},s.id))})]})},we=({galaxyName:t})=>e.jsx(G,{icon:"info",titleCenter:!0,title:"Agreement",interactive:!1,children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200 mb-2",children:"Requirement"}),e.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300",children:"You must be owner of the project, otherwise funding or changing license is not valid."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Ara has two rules:"}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4 space-y-2",children:[e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"font-semibold",children:"Rule 1:"})," You forge stars for galaxy ",e.jsxs("span",{className:"font-semibold",children:['"',t,'"']}),". 100,000 star tokens."]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Then it changes to star token holders."})]}),e.jsx("div",{className:"bg-slate-50 dark:bg-slate-800/50 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:[e.jsx("span",{className:"font-semibold",children:"Rule 2:"})," We have only rules and nothing else."]})})]})]})}),Ne=({galaxyId:t,onComplete:l,onError:n})=>{const[a,m]=p.useState([{id:1,title:"Creating blockchain ID",description:"Generating unique blockchain identifier...",status:"in-progress",progress:0},{id:2,title:"Waiting for transaction confirmation",description:"Submitting transaction to blockchain...",status:"pending",progress:0}]);p.useEffect(()=>{(async()=>{try{o(1,"in-progress",50,"Generating blockchain ID..."),await new Promise(c=>setTimeout(c,500)),o(1,"completed",100,"Blockchain ID generated"),o(2,"in-progress",50,"Submitting transaction..."),console.warn(`Creating blockchain transaction for galaxy ${t}`);const s=await X(t);if(!s.success){n(s.error||"Failed to create blockchain transaction");return}o(2,"completed",100,`Transaction confirmed: ${s.data.blockchainTx?.substring(0,16)}...`),l(s.data)}catch(s){console.error("Error creating blockchain transaction:",s),n(s instanceof Error?s.message:"An error occurred")}})()},[]);const o=(i,s,c,x)=>{m(f=>f.map(u=>u.id===i?{...u,status:s,progress:c,description:x}:u))};return e.jsxs(G,{title:e.jsxs("div",{className:"flex justify-left items-center gap-2",children:[e.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 17L12 22L22 17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M2 12L12 17L22 12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),e.jsx("span",{children:"Public Ledger"})]}),interactive:!1,children:[e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:"Creating blockchain transaction for your galaxy. This will record it on the public ledger."}),e.jsx("div",{className:"space-y-6 mb-8",children:a.map(i=>e.jsx(I,{title:i.title,description:i.description,status:i.status,progress:i.progress},i.id))})]})},Ce=t=>{if(!t.trim())return"Please enter a Git repository URL";try{const l=t.startsWith("git@")?`https://${t.replace("git@","").replace(":","/")}`:t,n=new URL(l);if(!n.hostname.includes("github.com")&&!n.hostname.includes("gitlab.com"))return"Only GitHub and GitLab repositories are supported"}catch{return"Invalid URL format"}return null},Pe=async t=>{const l=["README.md","README.txt","README"];for(const n of l){let a="";if(t.provider==="github")a=`https://raw.githubusercontent.com/${t.owner}/${t.repo}/${t.metadata.defaultBranch}/${n}`;else if(t.provider==="gitlab"){const m=t.host?`https://${t.host}`:"https://gitlab.com",o=encodeURIComponent(`${t.owner}/${t.repo}`);a=`${m}/api/v4/projects/${o}/repository/files/${n}/raw?ref=${t.metadata.defaultBranch}`}if(a){const m=await fetch(a);if(m.ok){const o=await m.text();return{content:o.length<=1e4?o.substring(0,1e4):o,url:a}}}}return{content:null,url:null}},Se=({galaxyName:t,isPlaced:l=!1})=>l?e.jsx(G,{icon:"check",titleCenter:!0,title:"Galaxy Placed",interactive:!1,children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("svg",{className:"w-16 h-16 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Your galaxy ",e.jsxs("span",{className:"font-semibold",children:['"',t,'"']})," has been placed on the Cosmic map!"]}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"It's now visible to others and can be discovered online."})]})}):e.jsx(G,{icon:"influencer",titleCenter:!0,title:"Place Galaxy",interactive:!1,children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Galaxy is not set yet. Not visible to others. Place in Cosmic around Ara so that people can visit and discover it online."})}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["Your galaxy ",e.jsxs("span",{className:"font-semibold",children:['"',t,'"']})," will be automatically placed at a default position around Ara."]})]})}),Le=({onCancel:t,onComplete:l})=>{const[n,a]=p.useState(""),[m,o]=p.useState(""),[i,s]=p.useState(""),[c,x]=p.useState(null),[f,u]=p.useState(null),[k,C]=p.useState(null),[P,v]=p.useState(null),[d,S]=p.useState(!1),[j,h]=p.useState(!1);p.useEffect(()=>{if(P!==null){const r=setTimeout(()=>{const b=document.querySelector('button[class*="bg-green-500"], button[class*="bg-indigo"]');b&&!b.disabled&&b.click(),v(null)},500);return()=>clearTimeout(r)}},[P]);const g=r=>{a(r),o("")},y=r=>{x(r),Pe(r).then(b=>{C(b.content!==null?b.content:""),console.log("Set the repository data",c,k),v(2)}).catch(b=>{alert(b),F()})},w=r=>{u(r),v(3)},N=()=>{v(5)},L=()=>{h(!0),v(6)},E=(r,b)=>{if(r===1&&b===2){const A=Ce(n);if(A)return o(A),!1;s(n.trim())}else if(r===4&&b===5)d||S(!0);else if(r===6&&b===7&&!j)return L(),!1;return!0},F=()=>{a(""),o(""),s(""),x(null),u(null),C(""),S(!1),h(!1),t()},z=()=>{setTimeout(()=>{a(""),o(""),s(""),x(null),u(null),C(""),S(!1),h(!1),l()},3e3)};return e.jsxs(pe,{initialStep:1,onBeforeStepChange:E,disableStepIndicators:!0,onFinalStepCompleted:z,backButtonText:"Previous",nextButtonText:"Next",stepCircleContainerClassName:"shadow-none border-none bg-transparent",className:"justify-start w-full rounded-lg bg-white/90 dark:bg-slate-900/90 backdrop-blur-md",stepContainerClassName:"px-1 pt-1",contentClassName:"p-0 w-full",children:[e.jsx(be,{gitUrl:n,onGitUrlChange:g,error:m}),e.jsx("div",{children:e.jsx(ke,{gitUrl:i,onComplete:y,onError:r=>{alert(r),F()}})}),e.jsx("div",{children:e.jsx(ve,{repositoryData:c,readmeContent:k||"",onComplete:w,onError:r=>{alert(r),F()}})}),e.jsx(we,{galaxyName:f?.name||"Galaxy"}),e.jsx("div",{children:e.jsx(Ne,{galaxyId:f?._id||"",onComplete:N,onError:r=>{alert(r),F()}})}),e.jsx(Se,{galaxyName:f?.name||"Galaxy",isPlaced:j}),e.jsx(G,{icon:"check",titleCenter:!0,title:"Galaxy Created Successfully!",interactive:!1,children:e.jsx("p",{className:"text-center text-slate-600 dark:text-slate-400",children:"Your galaxy has been created and placed on the Cosmic map."})})]})},mt=({starsunshines:t=0})=>{const[l,n]=p.useState(""),[a,m]=p.useState(0),[o,i]=p.useState([]),[s,c]=p.useState(!1),{data:x,isPending:f}=te.useSession(),u=t===0;p.useEffect(()=>{(async()=>{if(f)return;const y=x?.user;if(!y?.id){i([]);return}c(!0);try{const w=await se(y.id);if(w?._id){const N=await ae.getGalaxiesByMaintainer({maintainerId:w._id.toString()});N.data?.success&&N.data.galaxies?i(N.data.galaxies):i([])}else i([])}catch(w){console.error("Error fetching galaxies:",w),i([])}finally{c(!1)}})()},[x,f]);const k=e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[M({iconType:"lock",className:"w-4 h-4"}),e.jsx("span",{children:"Join our community, to try when this panel is ready"})]}),C=()=>{m(0)},P=()=>{setTimeout(()=>{m(0)},3e3)},v=o.length===0,d=o.length,S=d>0,j=v,h=v?e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsx("p",{children:"Add your open-source project, and create it's galaxy in all-stars."}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"You don't have any open-source project yet. Then, if you are contributor or user, browse the galaxies in the page"})]}):e.jsx("span",{className:"text-xs",children:"Add open-source repository to create its galaxy"});return a>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black/50 backdrop-blur-sm z-[100]",onClick:a===1?C:void 0}),e.jsx("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[101] flex items-center justify-center max-w-4xl w-full px-4",children:e.jsx("div",{className:"w-full max-w-2xl",children:e.jsx(Le,{onCancel:C,onComplete:P})})})]}):e.jsx("div",{className:"fixed bottom-20 left-1/2 transform -translate-x-1/2 z-10",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-3 top-1/2 transform -translate-y-1/2 -z-1",children:e.jsx("div",{className:T("w-6 h-16 p-1","backdrop-blur-sm bg-slate-900/20 dark:bg-slate-900/20","border border-slate-300/5 dark:border-slate-600/5","rounded-sm"),children:e.jsx("div",{className:"h-full w-full border-l border-slate-300/5 dark:border-slate-600/5"})})}),e.jsx("div",{className:"absolute -right-3 top-1/2 transform -translate-y-1/2 -z-1",children:e.jsx("div",{className:T("w-6 h-16 p-1","backdrop-blur-sm bg-slate-900/20 dark:bg-slate-900/20","border border-slate-300/5 dark:border-slate-600/5","rounded-sm"),children:e.jsx("div",{className:"h-full w-full border-r border-slate-300/5 dark:border-slate-600/5"})})}),e.jsx(q,{className:"p-3 min-w-[400px] max-w-[600px]",children:e.jsxs("div",{className:"flex items-center gap-2 space-x-4",children:[e.jsx(B,{content:u?k:e.jsx("span",{className:"text-xs",children:"Search projects, users, issues, and more..."}),children:e.jsx("div",{className:"flex-1",children:e.jsx(Z,{icon:"console",value:l,onChange:n,placeholder:"Search universe...",className:T("bg-slate-800/20 dark:bg-slate-900/20","border-slate-300/20 dark:border-slate-600/20","text-slate-400 dark:text-slate-500","placeholder:text-slate-500/50 dark:placeholder:text-slate-500/50","focus:ring-slate-400/20 focus:border-slate-400/30",u&&"opacity-50 cursor-not-allowed")})})}),e.jsx(B,{content:h,children:j?e.jsx(O,{color:"#5227FF",speed:1,thickness:2,children:e.jsx($,{onClick:()=>m(1),className:T("px-3 py-1.5 text-xs rounded","opacity-70 hover:opacity-100","text-slate-400 dark:text-white","border border-slate-300/20 dark:border-slate-600/20","hover:border-slate-400/30 dark:hover:border-slate-500/30","transition-all"),children:"New Galaxy"})}):e.jsx($,{onClick:()=>m(1),className:T("px-3 py-1.5 text-xs rounded","opacity-70 hover:opacity-100","text-slate-400 dark:text-white","border border-slate-300/20 dark:border-slate-600/20","hover:border-slate-400/30 dark:hover:border-slate-500/30","transition-all"),children:"New Galaxy"})}),e.jsx(B,{content:"My open-source projects. Click and browse your galaxies",children:e.jsxs(re,{children:[e.jsx(ne,{className:"hyperlink flex items-center justify-center shadow-none",children:S?e.jsx(O,{color:"#5227FF",speed:1,thickness:2,children:e.jsxs("div",{className:T("px-3 py-1.5 text-xs rounded flex items-center gap-2","opacity-70 hover:opacity-100","bg-slate-500 text-slate-100 hover:bg-slate-600 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500","border border-slate-300/20 dark:border-slate-600/20","hover:border-slate-400/30 dark:hover:border-slate-500/30","transition-all cursor-pointer"),children:["My Galaxies",e.jsx(U,{variant:"gray",static:!0,children:d})]})}):e.jsxs("div",{className:T("px-3 py-1.5 text-xs rounded flex items-center gap-2","opacity-70 hover:opacity-100","bg-slate-500 text-slate-100 hover:bg-slate-600 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500","border border-slate-300/20 dark:border-slate-600/20","hover:border-slate-400/30 dark:hover:border-slate-500/30","transition-all cursor-pointer"),children:["My Galaxies",d>0&&e.jsx(U,{variant:"gray",static:!0,children:d})]})}),e.jsx(ie,{children:e.jsx(oe,{sideOffset:8,side:"top",className:"z-700!",children:e.jsxs(le,{className:"w-80 origin-[var(--transform-origin)] rounded-xs bg-[canvas] px-4 py-3 text-gray-900 shadow-sm shadow-gray-900 dark:text-slate-300 dark:shadow-slate-300 transition-[transform,scale,opacity] data-[ending-style]:scale-90 data-[ending-style]:opacity-0 data-[starting-style]:scale-90 data-[starting-style]:opacity-0",children:[e.jsx(ce,{className:"data-[side=bottom]:top-[-8px] data-[side=left]:right-[-13px] data-[side=left]:rotate-90 data-[side=right]:left-[-13px] data-[side=right]:-rotate-90 data-[side=top]:bottom-[-8px] data-[side=top]:rotate-180",children:M("arrow")}),e.jsx(de,{className:"text-gray-500 dark:text-gray-400 font-medium text-sm mb-3",children:"My Galaxies"}),e.jsx(me,{className:"text-gray-600 dark:text-slate-400",children:s?e.jsx("div",{className:"text-sm text-center py-4",children:"Loading..."}):o.length===0?e.jsx("div",{className:"text-sm text-center py-4 text-slate-500 dark:text-slate-400",children:"No galaxies yet"}):e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:o.map(g=>{const y=g._id?.toString()||"";return e.jsxs(ee,{uri:`/project?galaxy=${y}`,className:"block p-3 rounded-lg border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800/50 transition-colors",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900 dark:text-slate-100 mb-1 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:g.name}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-600 dark:text-slate-400 mt-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[M({iconType:"sunshine",className:"w-3.5 h-3.5 text-yellow-500 dark:text-yellow-400"}),e.jsx(W,{value:g.sunshines||0,locales:"en-US",format:{style:"decimal",maximumFractionDigits:0}})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[M({iconType:"star",className:"w-3.5 h-3.5 text-blue-500 dark:text-blue-400"}),e.jsx(W,{value:g.stars||0,locales:"en-US",format:{style:"decimal",maximumFractionDigits:2}})]})]})]},y)})})})]})})})]})})]})})]})})};export{mt as default};
