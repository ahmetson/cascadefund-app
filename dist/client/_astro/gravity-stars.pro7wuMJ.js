import{j as V}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.DxhH1ShK.js";import{c as U}from"./utils.Lr0IsqiS.js";import"./clsx.B-dksMZM.js";function T({starsCount:C=75,starsSize:A=2,starsOpacity:f=.75,glowIntensity:S=15,glowAnimation:W="ease",movementSpeed:d=.3,starsInteraction:j=!1,starsInteractionType:F="bounce",className:H,...I}){const m=a.useRef(null),k=a.useRef(null),u=a.useRef(null),o=a.useRef([]),[g,J]=a.useState(1),[l,K]=a.useState({width:800,height:600}),P=a.useCallback(()=>{const e=m.current;return e&&getComputedStyle(e).color||"#ffffff"},[]),w=a.useCallback((e,r)=>{o.current=Array.from({length:C}).map(()=>{const n=Math.random()*Math.PI*2,t=d*(.5+Math.random()*.5);return{x:Math.random()*e,y:Math.random()*r,vx:Math.cos(n)*t,vy:Math.sin(n)*t,size:Math.random()*A+1,opacity:f,baseOpacity:f,mass:Math.random()*.5+.5,glowMultiplier:1,glowVelocity:0}})},[C,d,f,A]),B=a.useCallback((e,r)=>{o.current.forEach(n=>{n.x=Math.random()*e,n.y=Math.random()*r})},[]),M=a.useCallback(()=>{const e=k.current,r=m.current;if(!e||!r)return;const n=r.getBoundingClientRect(),t=Math.max(1,Math.min(window.devicePixelRatio||1,2));J(t),e.width=Math.max(1,Math.floor(n.width*t)),e.height=Math.max(1,Math.floor(n.height*t)),e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,K({width:n.width,height:n.height}),o.current.length===0?w(n.width,n.height):B(n.width,n.height)},[w,B]),D=a.useCallback(()=>{const e=l.width,r=l.height;for(let n=0;n<o.current.length;n++){const t=o.current[n];if(t.opacity=t.baseOpacity,t.glowMultiplier=1,j)for(let i=n+1;i<o.current.length;i++){const s=o.current[i],p=s.x-t.x,b=s.y-t.y,v=Math.hypot(p,b),R=t.size+s.size+5;if(v<R&&v>0)if(F==="bounce"){const h=p/v,c=b/v,O=t.vx-s.vx,Q=t.vy-s.vy,L=O*h+Q*c;if(L<0)continue;const z=2*L/(t.mass+s.mass);t.vx-=z*s.mass*h,t.vy-=z*s.mass*c,s.vx+=z*t.mass*h,s.vy+=z*t.mass*c;const N=R-v,$=h*N*.5,G=c*N*.5;t.x-=$,t.y-=G,s.x+=$,s.y+=G}else{const h=(R-v)/R;t.glowMultiplier=(t.glowMultiplier||1)+h*.5,s.glowMultiplier=(s.glowMultiplier||1)+h*.5;const c=h*.01;t.vx+=p*c,t.vy+=b*c,s.vx-=p*c,s.vy-=b*c}}t.x+=t.vx,t.y+=t.vy,t.vx+=(Math.random()-.5)*.001,t.vy+=(Math.random()-.5)*.001;const x=Math.hypot(t.vx,t.vy),y=d*(.5+Math.random()*.5);if(x>0){const i=y/x;(x<y*.5||x>y*1.5)&&(t.vx*=i,t.vy*=i)}else{const i=Math.random()*Math.PI*2;t.vx=Math.cos(i)*y,t.vy=Math.sin(i)*y}t.x<0&&(t.x=e),t.x>e&&(t.x=0),t.y<0&&(t.y=r),t.y>r&&(t.y=0)}},[l.width,l.height,d,j,F]),q=a.useCallback(e=>{e.clearRect(0,0,e.canvas.width,e.canvas.height);const r=P();for(const n of o.current)e.save(),e.shadowColor=r,e.shadowBlur=S*(n.glowMultiplier||1)*2,e.globalAlpha=n.opacity,e.fillStyle=r,e.beginPath(),e.arc(n.x*g,n.y*g,n.size*g,0,Math.PI*2),e.fill(),e.restore()},[g,S,P]),E=a.useCallback(()=>{const e=k.current;if(!e)return;const r=e.getContext("2d");r&&(D(),q(r),u.current=requestAnimationFrame(E))},[D,q]);return a.useEffect(()=>{M();const e=m.current,r=typeof ResizeObserver<"u"?new ResizeObserver(M):null;e&&r&&r.observe(e);const n=()=>M();return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),r&&e&&r.disconnect()}},[M]),a.useEffect(()=>{o.current.length===0?w(l.width,l.height):o.current.forEach(e=>{e.baseOpacity=f,e.opacity=f;const r=Math.hypot(e.vx,e.vy);if(r>0){const n=d/r;e.vx*=n,e.vy*=n}})},[C,f,d,l.width,l.height,w]),a.useEffect(()=>(u.current&&cancelAnimationFrame(u.current),u.current=requestAnimationFrame(E),()=>{u.current&&cancelAnimationFrame(u.current),u.current=null}),[E]),V.jsx("div",{ref:m,"data-slot":"gravity-stars-background",className:U("relative size-full overflow-hidden",H),...I,children:V.jsx("canvas",{ref:k,className:"w-full h-full"})})}export{T as GravityStarsBackground};
