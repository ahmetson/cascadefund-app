import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.DxhH1ShK.js";import{B as F}from"./Panel.BDrWh8LJ.js";import"./ripple.MQee5g1d.js";import"./accordion.Du3ry5_a.js";import{B as N}from"./Button.CuXyr_i0.js";import{C as L}from"./Link.k33VB9n9.js";import{I as u}from"./Input.BhPYPo8a.js";import{L as n}from"./Label.C_pE6Uy6.js";import{F as P,a as B,b as T}from"./index.kRI0wtIn.js";import{u as D}from"./useIsCurrentUser.C-ex-YMJ.js";import{a as G}from"./virtual.VUcB3V37.js";import{a as H}from"./auth.C6MmFFld.js";import{A as U}from"./index.CG_O7YBG.js";import{m as R}from"./proxy.D4YeN7SK.js";import"./utils.Lr0IsqiS.js";import"./clsx.B-dksMZM.js";import"./eventTypes.j192VUKf.js";import"./slot.Dc8ja7ZA.js";import"./use-controlled-state.CxrLW6JS.js";import"./index.TaQMmt2C.js";import"./index.C2SuE_cr.js";import"./index.CqUFkXl9.js";import"./index.pjxe1RjL.js";import"./ElectricBorder.BANsXwQj.js";import"./client.B9YBqyHK.js";async function $(p){try{const s=await G.getAccountsByUserId({userId:p});return s.data?.success&&s.data.data?s.data.data:[]}catch(s){return console.error("Error getting accounts by user id:",s),[]}}const xe=({user:p,authUser:s})=>{const[c,w]=a.useState(!1),[l,A]=a.useState(!1),[x,h]=a.useState(!1),[k,I]=a.useState([]),[q,f]=a.useState(!1),[g,v]=a.useState(""),[y,j]=a.useState(""),d=s?.email,{isCurrentUser:r,isLoading:S}=D(d);a.useEffect(()=>{(async()=>{const i=await H.getSession();A(!!i?.data?.user)})()},[]),a.useEffect(()=>{s&&(v(s.name||""),j(s.username||s.displayUsername||""))},[s]),a.useEffect(()=>{(async()=>{if(r&&s?.id){f(!0);try{const i=await $(s.id);I(i.map(b=>({providerId:b.providerId,providerAccountId:b.providerAccountId})))}catch(i){console.error("Error fetching accounts:",i)}finally{f(!1)}}})()},[r,s?.id]);const m=[],o=k.find(t=>t.providerId==="github");o&&m.push({type:"github",url:`https://github.com/${o.providerAccountId}`});const E=t=>{switch(t){case"github":return e.jsx(T,{className:"w-5 h-5 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"});case"linkedin":return e.jsx(B,{className:"w-5 h-5 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"});case"telegram":return e.jsx(P,{className:"w-5 h-5 text-slate-600 dark:text-slate-400 hover:text-blue-600 dark:hover:text-blue-400 transition-colors"})}},C=async()=>{if(!(!l||!r)){h(!0);try{await new Promise(t=>setTimeout(t,1e3)),console.log("Saving account:",{displayName:g,username:y}),alert("Account settings saved successfully!")}catch(t){console.error("Error saving account:",t),alert("Failed to save account settings. Please try again.")}finally{h(!1)}}};return S||!l||!r?null:e.jsxs("div",{className:"w-full mt-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(N,{onClick:()=>w(!c),variant:"secondary",outline:!0,children:c?"Hide Form":"User Account"})}),e.jsx(U,{mode:"wait",children:c&&e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"w-full",children:e.jsx(F,{className:"w-full",children:e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"Profile Information"}),l&&r&&e.jsx(N,{onClick:C,disabled:x,variant:"success",children:x?"Saving...":"Save Account"})]}),m.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Connected Social Links"}),e.jsx("div",{className:"flex items-center gap-4",children:m.map(t=>e.jsxs(L,{uri:t.url,asNewTab:!0,className:"flex items-center gap-2 p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800/50 transition-colors",children:[E(t.type),e.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:t.type==="github"&&o&&e.jsxs(e.Fragment,{children:["GitHub (",o.providerAccountId,")"]})})]},t.type))})]}),d&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Email"}),e.jsx("div",{className:"text-sm font-medium text-slate-900 dark:text-slate-100 px-3 py-2 bg-slate-50 dark:bg-slate-800/50 rounded-lg",children:d})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Display Name"}),e.jsx(u,{type:"text",value:g,onChange:t=>v(t.target.value),className:"w-full",placeholder:"Enter display name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Username"}),e.jsx(u,{type:"text",value:y,onChange:t=>j(t.target.value),className:"w-full",placeholder:"Enter username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Password"}),e.jsx(u,{type:"password",value:"••••••••",disabled:!0,className:"w-full",onChange:()=>{},placeholder:"Enter password"}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 italic",children:"Password change is not available yet."})]})]})})},"form")})]})};export{xe as default};
