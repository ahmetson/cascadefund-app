import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as s}from"./index.DxhH1ShK.js";import{c as y}from"./utils.Lr0IsqiS.js";import{c as w}from"./confetti.module.Cx83yTHA.js";import{P as A}from"./PageLikePanel.guWiuL_Q.js";import{C as I}from"./Link.k33VB9n9.js";import{B as P}from"./Button.CuXyr_i0.js";import{g as T}from"./icon.DFuhwfpy.js";import{D as N,d as k,s as R}from"./demo.CHhf2w8G.js";import{m as b}from"./proxy.D4YeN7SK.js";import{A as U}from"./index.CG_O7YBG.js";import"./clsx.B-dksMZM.js";import"./Panel.BDrWh8LJ.js";import"./eventTypes.j192VUKf.js";import"./ripple.MQee5g1d.js";import"./slot.Dc8ja7ZA.js";import"./accordion.CkcBKuZR.js";import"./accordion.Du3ry5_a.js";import"./use-controlled-state.CxrLW6JS.js";import"./index.TaQMmt2C.js";import"./index.C2SuE_cr.js";import"./index.CqUFkXl9.js";import"./index.pjxe1RjL.js";import"./createLucideIcon.C1tpinp8.js";import"./PanelAction.DEFdBo1-.js";import"./ElectricBorder.BANsXwQj.js";import"./virtual.VUcB3V37.js";import"./client.B9YBqyHK.js";function L(){const[c,u]=s.useState(!1),[i,x]=s.useState([]),[t,p]=s.useState(!1),d=l=>{x(l),u(!0)},o=()=>{if(t)return;p(!0);const l=3e3,g=Date.now()+l,f={startVelocity:30,spread:360,ticks:60,zIndex:9999};function h(n,m){return Math.random()*(m-n)+n}const v=setInterval(function(){const n=g-Date.now();if(n<=0){clearInterval(v);return}const m=50*(n/l);w({...f,particleCount:m,origin:{x:h(.1,.3),y:Math.random()-.2}}),w({...f,particleCount:m,origin:{x:h(.7,.9),y:Math.random()-.2}})},250)};return s.useEffect(()=>{c&&!t&&o()},[c,t]),{showDialog:c,demoUsers:i,hasTriggeredConfetti:t,setShowDialog:u,handleSuccess:d,triggerConfetti:o}}const z=({isOpen:c,users:u,onClose:i})=>c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed top-0 left-0 w-full h-full bg-black/50 backdrop-blur-sm z-[100]",onClick:i}),e.jsx("div",{className:"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-[101] flex items-center justify-center w-full max-w-2xl px-4",children:e.jsx(A,{title:"Congratulations!",titleCenter:!0,children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Your demo users"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u.map((t,p)=>e.jsxs("div",{className:"flex flex-col items-center p-4 rounded-lg bg-slate-100/50 dark:bg-slate-800/50",children:[e.jsx("img",{src:t.src,alt:t.nickname||"Avatar",className:"w-32 h-32 rounded-full mb-2"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:t.nickname}),e.jsx("div",{className:"text-xs mt-1",children:e.jsx("span",{className:y("px-2 py-0.5 rounded",t.role==="maintainer"&&"bg-blue-500 text-white",t.role==="user"&&"bg-green-500 text-white",t.role==="contributor"&&"bg-purple-500 text-white"),children:t.role})})]})]},p))}),e.jsxs("div",{className:"text-slate-600 dark:text-slate-400 text-center space-y-2",children:[e.jsx("p",{className:"text-lg font-medium",children:"ðŸŽ‰ Welcome to your demo experience!"}),e.jsxs("p",{className:"text-base",children:["You have received a ",e.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"$50 demo coupon"})," to explore the All Stars universe of open-source projects."]}),e.jsx("p",{className:"text-base",children:"Browse the universe and choose a project to contribute to."})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(I,{uri:"/all-stars",children:e.jsx(P,{variant:"primary",size:"lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"Browse"}),T({iconType:"ara",className:"w-5 h-5"}),e.jsx("span",{children:"All Stars"})]})})})})]})})})]}):null,me=({projectName:c,galaxyId:u})=>{const[i,x]=s.useState(!1),[t,p]=s.useState(""),[d,o]=s.useState(""),[l,g]=s.useState(!1),[f,h]=s.useState(!0),{showDialog:v,demoUsers:n,setShowDialog:m,handleSuccess:E}=L();s.useEffect(()=>{const r=()=>{h(!1)};return window.addEventListener(N.USER_CREATED,r),()=>{window.removeEventListener(N.USER_CREATED,r)}},[]),s.useEffect(()=>{k()&&h(!1)},[k]);const S=r=>{p(r.target.value)},D=r=>{if(r.key==="Enter"&&t.trim()){const j=r.currentTarget.closest("form");j&&j.requestSubmit()}},C=async r=>{if(r.preventDefault(),!t||!t.trim()){o("please write email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.trim())){o("please write email address");return}g(!0),o("");try{const a=await R(t.trim());a.success&&"users"in a&&a.users&&Array.isArray(a.users)?E(a.users,t.trim()):o("error"in a&&a.error||"Failed to start demo")}catch(a){o(a.message||"An error occurred. Please try again.")}finally{g(!1)}};return f?e.jsxs(b.div,{className:y("relative w-full max-w-md mx-auto -mt-20 z-11","backdrop-blur-md bg-white/30 dark:bg-slate-900/30","border border-slate-200/40 dark:border-slate-700/40","rounded-xl p-8","transition-all duration-300","hover:bg-white/40 dark:hover:bg-slate-900/40","hover:border-slate-300/60 dark:hover:border-slate-600/60","hover:shadow-2xl hover:shadow-blue-500/30","shadow-lg shadow-blue-500/10"),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),animate:{scale:i?1.02:1,y:f?i?-4:0:-20},exit:{opacity:0,y:-20},transition:{type:"spring",stiffness:300,damping:20},children:[i&&e.jsx(b.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 rounded-xl pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 text-center",children:"Demo Try out"}),e.jsxs("form",{onSubmit:C,className:"w-full space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",name:"email",value:t,onChange:S,onKeyPress:D,placeholder:"Enter your email",className:y("flex-1 h-12 px-4 rounded-lg","bg-white/50 dark:bg-slate-800/50","border border-slate-300/50 dark:border-slate-600/50","text-slate-800 dark:text-slate-200","placeholder:text-slate-400 dark:placeholder:text-slate-500","focus:outline-none focus:ring-2 focus:ring-blue-500/50","focus:border-blue-500/50","transition-all duration-200",d&&"border-red-500/50 focus:ring-red-500/50 focus:border-red-500/50")}),e.jsx("button",{type:"submit",disabled:l,className:y("h-12 px-6 whitespace-nowrap rounded-lg font-medium transition-colors","bg-rose-500 text-white hover:bg-sky-500","disabled:opacity-50 disabled:cursor-not-allowed"),children:l?"Starting...":"Start"})]}),e.jsx(U,{children:d&&e.jsx(b.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"text-sm text-red-500 dark:text-red-400 text-center",children:typeof d=="string"?d:"An error occurred"})})]}),e.jsx(b.p,{className:"text-sm text-slate-600 dark:text-slate-400 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"You will start immediately."})]}),e.jsx(z,{isOpen:v,users:n,onClose:()=>m(!1)})]}):null};export{me as default};
