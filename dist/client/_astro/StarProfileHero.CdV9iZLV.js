import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{B as k}from"./BlurText.D-ox_uc4.js";import{g as p}from"./icon.DFuhwfpy.js";import{r as c}from"./index.DxhH1ShK.js";import{N}from"./NumberFlow-client-48rw3j0J.DO-Ted3l.js";import{B as f}from"./Panel.BDrWh8LJ.js";import"./ripple.MQee5g1d.js";import"./accordion.Du3ry5_a.js";import"./ElectricBorder.BANsXwQj.js";import{C as b}from"./Link.k33VB9n9.js";import{B as u}from"./Badge.CwoN8wRJ.js";import{P as T}from"./PanelFooter.2n65IKfH.js";import{A as E}from"./AuthStar.Dmg28nm4.js";import{T as v}from"./timeago-react.CCkgRyVe.js";import{g as L}from"./star.J0JRTi5O.js";import{g as B}from"./auth.C6MmFFld.js";import{c as S}from"./utils.Lr0IsqiS.js";import{B as h}from"./blog.BdlOHMLX.js";import{S as C}from"./index.Sjdb_iv4.js";import"./proxy.D4YeN7SK.js";import"./eventTypes.j192VUKf.js";import"./slot.Dc8ja7ZA.js";import"./use-controlled-state.CxrLW6JS.js";import"./index.TaQMmt2C.js";import"./index.C2SuE_cr.js";import"./index.CqUFkXl9.js";import"./index.pjxe1RjL.js";import"./index.CG_O7YBG.js";import"./Tooltip.BWGh4r1w.js";import"./virtual.VUcB3V37.js";import"./client.B9YBqyHK.js";import"./clsx.B-dksMZM.js";import"./createLucideIcon.C1tpinp8.js";const A=t=>{const[l,i]=c.useState(null),[a,x]=c.useState(!1);c.useEffect(()=>{t.author&&(console.log("fetching author user for blog",t.author),x(!0),L(t.author).then(async n=>{if(n&&n.userId){const o=await B(n.userId);o&&i(o)}}).catch(n=>{console.error("Error fetching author:",n)}).finally(()=>{x(!1)}))},[t.author]);const r=t.tags&&t.tags.length>0?t.tags[0]:void 0,m=t.tags&&t.tags.length>1?t.tags.slice(1):[],d=t.description?t.description.length>150?t.description.substring(0,150)+"...":t.description:t.content.length>150?t.content.substring(0,150)+"...":t.content;return e.jsx(b,{uri:`/blog?id=${t._id}`,asNewTab:!1,children:e.jsx(f,{bg:"bg-white/50 dark:bg-slate-900/50",className:S("mb-4 hover:bg-white dark:hover:bg-slate-900 hover:border-blue-500/20 transition-colors",t.className),children:e.jsxs("div",{className:"flex flex-col space-y-3 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("h2",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 flex-1 text-left",children:t.title}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(u,{variant:t.draft?"warning":"success",static:!0,children:t.draft?"Draft":"Published"})})]}),d&&e.jsx("p",{className:"text-base text-slate-600 dark:text-slate-400 line-clamp-2 text-left",children:d}),t.tags&&t.tags.length>0&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r&&e.jsx(u,{variant:r.toLowerCase()==="bug"?"danger":r.toLowerCase()==="feature"?"blue":r.toLowerCase()==="improvement"?"success":r.toLowerCase()==="enhancement"?"warning":"info",static:!0,children:r}),m.map((n,o)=>e.jsx(u,{variant:"info",static:!0,children:n},o))]}),t.projects&&t.projects.length>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 dark:text-slate-400",children:[p({iconType:"project",className:"w-4 h-4"}),e.jsxs("span",{children:["Linked to ",t.projects.length," ",t.projects.length===1?"project":"projects"]})]}),e.jsxs(T,{className:"flex flex-row justify-between items-center mt-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:[e.jsx("div",{className:"flex items-center space-x-1 text-slate-600 dark:text-slate-400 gap-1 text-xs",children:a?e.jsx("span",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"By"}),e.jsx(E,{src:l?.image,className:"w-6 h-6",starId:t.author,noLink:!0}),e.jsx("span",{children:l?.name||l?.username||l?.displayUsername||l?.email?.split("@")[0]||"Unknown"})]})}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[t.createdTime&&e.jsx(v,{datetime:t.createdTime*1e3}),t.updatedTime&&t.updatedTime!==t.createdTime&&e.jsxs("span",{className:"text-slate-400 dark:text-slate-500",children:["(updated ",e.jsx(v,{datetime:t.updatedTime*1e3}),")"]})]})]})]})})})},P=({blogs:t,isMerged:l=!1,className:i})=>{const[a,x]=c.useState(t),[r,m]=c.useState(!1),[d,n]=c.useState(null),o=c.useMemo(()=>{const s=new Set;return a.forEach(w=>{w.tags?.forEach(y=>s.add(y))}),Array.from(s).sort()},[a]),g=c.useMemo(()=>a.filter(s=>!(d&&!s.tags?.includes(d))),[a,d]);return c.useEffect(()=>{const s=()=>{m(!0),setTimeout(()=>m(!1),500)};return window.addEventListener(h.BLOG_CREATED,s),window.addEventListener(h.BLOG_UPDATE,s),()=>{window.removeEventListener(h.BLOG_CREATED,s),window.removeEventListener(h.BLOG_UPDATE,s)}},[]),c.useEffect(()=>{x(t)},[t]),r?e.jsx(f,{className:i,children:e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(C,{})})}):g.length===0?e.jsx(f,{className:i,children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 mb-2",children:a.length===0?"No blog posts yet":"No blogs match the selected filters"}),a.length===0&&e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-500",children:"Create your first blog post to get started!"})]})}):e.jsxs("div",{className:i,children:[o.length>0&&e.jsx(f,{className:"mb-4 p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Filters:"}),e.jsx("button",{onClick:()=>n(null),className:`px-3 py-1 text-xs rounded-full transition-colors ${d===null?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:"All Tags"}),o.map(s=>e.jsx("button",{onClick:()=>n(d===s?null:s),className:`px-3 py-1 text-xs rounded-full transition-colors ${d===s?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-600"}`,children:s},s))]})}),e.jsx("div",{className:`grid grid-cols-1 ${l?"md:grid-cols-2":"md:grid-cols-2 lg:grid-cols-3"} gap-4`,children:g.map(s=>e.jsx(A,{...s},s._id))})]})},j="polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)",me=({user:t,galaxies:l,blogs:i,authUser:a})=>{const x="https://api.backdropbuild.com/storage/v1/object/public/avatars/9nFM8HasgS.jpeg",r=a?.name||a?.username||a?.email?.split("@")[0]||"Unknown User",m=a?.image||x;return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center space-y-12 px-4 relative w-full max-w-6xl mx-auto",children:[e.jsxs("div",{className:"w-full space-y-6",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative w-32 h-32 md:w-40 md:h-40 transition-transform hover:scale-105 duration-300",style:{clipPath:j,background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 50%, #d97706 100%)",filter:"drop-shadow(0 20px 40px rgba(251, 191, 36, 0.5))"},children:[e.jsx("div",{className:"absolute inset-0 opacity-40 animate-pulse",style:{clipPath:j,background:"radial-gradient(circle, rgba(251, 191, 36, 0.8) 0%, transparent 70%)"}}),e.jsx("div",{className:"absolute inset-2 flex items-center justify-center overflow-hidden rounded-sm",style:{clipPath:j},children:e.jsx("img",{src:m,alt:r,className:"w-full h-full object-cover"})})]})}),e.jsx("div",{className:"w-full",children:e.jsx(k,{text:r,className:"text-5xl md:text-6xl lg:text-7xl font-bold text-slate-800 dark:text-slate-200 justify-center",animateBy:"words",direction:"top",delay:100})}),e.jsxs("div",{className:"flex items-center justify-center gap-8 py-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p({iconType:"sunshine",className:"w-5 h-5 text-yellow-500 dark:text-yellow-400"}),e.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Sunshines"})]}),e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:e.jsx(N,{value:t.sunshines||0,locales:"en-US",format:{style:"decimal",maximumFractionDigits:0}})})]}),e.jsx("div",{className:"w-px h-12 bg-slate-300 dark:bg-slate-600"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p({iconType:"star",className:"w-5 h-5 text-blue-500 dark:text-blue-400"}),e.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Stars"})]}),e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:e.jsx(N,{value:t.stars||0,locales:"en-US",format:{style:"decimal",maximumFractionDigits:2}})})]}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-px h-12 bg-slate-300 dark:bg-slate-600"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[p({iconType:"project",className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),e.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Galaxies"})]}),e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:l.length})]})]})]})]}),e.jsxs("div",{className:"w-full mt-16",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Thoughts"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:i.length===0?"No thoughts shared yet":`${i.length} ${i.length===1?"thought":"thoughts"}`})]}),e.jsx(P,{blogs:i})]})]})};export{me as default};
