import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.DxhH1ShK.js";import{B as g}from"./Button.BGGO0Gl0.js";import{S as j,a as p}from"./ScrollStack.BC0PwliQ.js";import{g as y}from"./demo.DsLEr97b.js";import{c as C}from"./roadmap.oaZTwDY3.js";import{C as N,a as E}from"./checkbox.CoCXscxc.js";import{D as S}from"./DemoAuthPanel.FY41zhzw.js";import{c as T}from"./utils.BnlJtBIq.js";import{R as A}from"./roadmap.DwIP75iC.js";import"./ripple.CLh-JuST.js";import"./slot.DPiB-jfz.js";import"./index.CqUFkXl9.js";import"./proxy.D4YeN7SK.js";import"./ElectricBorder.DAWLx7iV.js";import"./eventTypes.CfSurkCl.js";import"./virtual.VUcB3V37.js";import"./client.B9YBqyHK.js";import"./patch.CbMO86LR.js";import"./use-controlled-state.FkpCVSoL.js";import"./index.VlIKThXs.js";import"./index.DXWCtkbr.js";import"./index.BI6QXNvC.js";const I=({galaxyId:d,onSuccess:m,onCancel:n})=>{const[o,u]=a.useState(""),[b,f]=a.useState(!1),[k,v]=a.useState(0),i=a.useRef(null),l=a.useRef([]),h=a.useRef(null);a.useEffect(()=>{h.current&&setTimeout(()=>h.current?.focus(),100)},[]);const x=a.useCallback(()=>{if(l.current.length===0||!i.current)return;const r=Math.min(k+1,l.current.length-1),t=l.current[r];if(t&&i.current){const s=i.current.querySelector(".scroll-stack-inner");if(s){const c=t.offsetTop-s.offsetTop;s.scrollTo({top:c-100,behavior:"smooth"}),v(r)}}},[k]);a.useEffect(()=>{const r=t=>{(t.key==="Enter"||t.key==="Tab")&&(t.key==="Tab"&&!(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)&&t.preventDefault(),t.key==="Enter"&&t.target instanceof HTMLInputElement&&(t.preventDefault(),x()))};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[x]),a.useEffect(()=>{const r=i.current?.querySelector(".scroll-stack-inner");if(!r)return;const t=()=>{};let s;const c=()=>{s=requestAnimationFrame(c)};return r.addEventListener("scroll",()=>{s||(s=requestAnimationFrame(c))}),()=>{s&&cancelAnimationFrame(s),r.removeEventListener("scroll",t)}},[]);const w=async()=>{if(!o.trim()){alert("Please enter a version tag");return}f(!0);try{const r=y();if(!r.email){alert("Please log in to create a version"),f(!1);return}await C({galaxyId:d,tag:o.trim(),email:r.email})?m?.():alert("Failed to create version")}catch(r){console.error("Error creating version:",r),alert("An error occurred while creating the version")}finally{f(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-50 pointer-events-none",children:[n&&e.jsx("button",{onClick:n,className:"fixed top-16 right-16 z-50 pointer-events-auto w-10 h-10 rounded-sm bg-white/90 dark:bg-slate-950/95 backdrop-blur-md border border-slate-200/50 dark:border-slate-800/50 shadow-lg flex items-center justify-center text-slate-500 hover:text-slate-700 dark:hover:text-slate-200 transition-all hover:scale-110",children:"âœ•"}),e.jsx("div",{ref:i,className:"absolute bottom-0 left-0 right-0 h-[80vh] pointer-events-auto",children:e.jsxs(j,{useWindowScroll:!1,className:"h-full",children:[e.jsx(p,{itemClassName:"bg-white/5 dark:bg-slate-900/10 backdrop-blur-md border border-white/10 dark:border-slate-700/20 transition-all duration-300",children:e.jsxs("div",{ref:r=>{l.current[0]=r},className:"space-y-4",children:[e.jsx("label",{className:"block text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Version Tag *"}),e.jsx("input",{ref:h,type:"text",value:o,onChange:r=>u(r.target.value),onKeyDown:r=>{r.key==="Enter"&&(r.preventDefault(),x())},placeholder:"Enter a version tag (e.g., v2.0.0)",className:"w-full text-lg px-3 py-2 border border-gray-300/50 dark:border-slate-700/50 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white/30 dark:bg-slate-900/40 backdrop-blur-md"})]})}),e.jsx(p,{itemClassName:"bg-white/5 dark:bg-slate-900/10 backdrop-blur-md border border-white/10 dark:border-slate-700/20 transition-all duration-300",children:e.jsxs("div",{ref:r=>{l.current[1]=r},className:"space-y-4",children:[e.jsx("label",{className:"block text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Maintainer *"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Assign yourself as the maintainer of this version"}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-slate-200/80 dark:bg-slate-800/80 rounded-lg border border-gray-300/50 dark:border-slate-700/50 backdrop-blur-sm",children:[e.jsx(N,{checked:!0,disabled:!0,className:"w-5 h-5 rounded-sm border-2 border-slate-400 dark:border-slate-600 bg-slate-700 dark:bg-slate-800 data-[state=checked]:bg-blue-600 dark:data-[state=checked]:bg-blue-500 data-[state=checked]:border-blue-600 dark:data-[state=checked]:border-blue-500 flex items-center justify-center",children:e.jsx(E,{className:"w-3 h-3 text-white"})}),e.jsx("span",{className:"text-slate-700 dark:text-slate-300 flex-1",children:"Assign to me"})]})]})}),e.jsx(p,{itemClassName:"bg-white/5 dark:bg-slate-900/10 backdrop-blur-md border border-white/10 dark:border-slate-700/20 transition-all duration-300",children:e.jsxs("div",{ref:r=>{l.current[2]=r},className:"flex flex-col items-center gap-4",children:[e.jsx(g,{variant:"primary",size:"lg",onClick:w,disabled:b||!o.trim(),className:"w-full max-w-md backdrop-blur-sm",children:b?"Creating Version...":"Create Version"}),n&&e.jsx(g,{variant:"secondary",size:"md",onClick:n,disabled:b,className:"backdrop-blur-sm",children:"Cancel"})]})})]})})]})},ee=({galaxyId:d,onVersionCreated:m})=>{const[n,o]=a.useState(!1),u=()=>{o(!1),setTimeout(()=>{m?.(),window.dispatchEvent(new CustomEvent(A.VERSION_CREATED))},500)};return e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsx("div",{className:T("fixed bottom-4 right-1/2 translate-x-1/2 z-40","backdrop-blur-md bg-white/90 dark:bg-slate-900/90","border border-slate-200/50 dark:border-slate-700/50","rounded-lg shadow-lg","transition-all duration-300","hover:shadow-xl hover:scale-105"),children:e.jsxs(g,{variant:"primary",outline:!0,size:"lg",onClick:()=>o(!0),className:"px-6 py-3 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("span",{children:"Create Version"})]})})}),n&&e.jsx(I,{galaxyId:d,onSuccess:u,onCancel:()=>o(!1)})]})};export{ee as default};
