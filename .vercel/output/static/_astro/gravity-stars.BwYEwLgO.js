import{j as T}from"./jsx-runtime.D_zvdyIk.js";import{r}from"./index.DxhH1ShK.js";import{c as et}from"./utils.BnlJtBIq.js";function rt({starsCount:S=75,starsSize:P=2,starsOpacity:w=.75,glowIntensity:B=15,glowAnimation:x="ease",movementSpeed:m=.3,mouseInfluence:b=100,mouseGravity:j="attract",gravityStrength:D=75,starsInteraction:G=!1,starsInteractionType:X="bounce",className:U,...W}){const R=r.useRef(null),C=r.useRef(null),v=r.useRef(null),h=r.useRef([]),Y=r.useRef({x:0,y:0}),[z,Z]=r.useState(1),[g,_]=r.useState({width:800,height:600}),q=r.useCallback(()=>{const e=R.current;return e&&getComputedStyle(e).color||"#ffffff"},[]),k=r.useCallback((e,o)=>{h.current=Array.from({length:S}).map(()=>{const n=Math.random()*Math.PI*2,c=m*(.5+Math.random()*.5);return{x:Math.random()*e,y:Math.random()*o,vx:Math.cos(n)*c,vy:Math.sin(n)*c,size:Math.random()*P+1,opacity:w,baseOpacity:w,mass:Math.random()*.5+.5,glowMultiplier:1,glowVelocity:0}})},[S,m,w,P]),A=r.useCallback((e,o)=>{h.current.forEach(n=>{n.x=Math.random()*e,n.y=Math.random()*o})},[]),E=r.useCallback(()=>{const e=C.current,o=R.current;if(!e||!o)return;const n=o.getBoundingClientRect(),c=Math.max(1,Math.min(window.devicePixelRatio||1,2));Z(c),e.width=Math.max(1,Math.floor(n.width*c)),e.height=Math.max(1,Math.floor(n.height*c)),e.style.width=`${n.width}px`,e.style.height=`${n.height}px`,_({width:n.width,height:n.height}),h.current.length===0?k(n.width,n.height):A(n.width,n.height)},[k,A]),L=r.useCallback(e=>{const o=C.current;if(!o)return;const n=o.getBoundingClientRect();let c=0,t=0;if("touches"in e){const M=e.touches[0];if(!M)return;c=M.clientX,t=M.clientY}else c=e.clientX,t=e.clientY;Y.current={x:c-n.left,y:t-n.top}},[]),N=r.useCallback(()=>{const e=g.width,o=g.height,n=Y.current;for(let c=0;c<h.current.length;c++){const t=h.current[c],M=n.x-t.x,O=n.y-t.y,p=Math.hypot(M,O);if(p<b&&p>0){const i=(b-p)/b,s=M/p,f=O/p,a=i*(D*.001);j==="attract"?(t.vx+=s*a,t.vy+=f*a):j==="repel"&&(t.vx-=s*a,t.vy-=f*a),t.opacity=Math.min(1,t.baseOpacity+i*.4);const d=1+i*2,y=t.glowMultiplier||1;if(x==="instant")t.glowMultiplier=d;else if(x==="ease")t.glowMultiplier=y+(d-y)*.15;else{const l=(d-y)*.2,u=.85;t.glowVelocity=(t.glowVelocity||0)*u+l,t.glowMultiplier=y+(t.glowVelocity||0)}}else{t.opacity=Math.max(t.baseOpacity*.3,t.opacity-.02);const i=1,s=t.glowMultiplier||1;if(x==="instant")t.glowMultiplier=i;else if(x==="ease")t.glowMultiplier=Math.max(1,s+(i-s)*.08);else{const f=(i-s)*.15,a=.9;t.glowVelocity=(t.glowVelocity||0)*a+f,t.glowMultiplier=Math.max(1,s+(t.glowVelocity||0))}}if(G)for(let i=c+1;i<h.current.length;i++){const s=h.current[i],f=s.x-t.x,a=s.y-t.y,d=Math.hypot(f,a),y=t.size+s.size+5;if(d<y&&d>0)if(X==="bounce"){const l=f/d,u=a/d,I=t.vx-s.vx,tt=t.vy-s.vy,H=I*l+tt*u;if(H<0)continue;const V=2*H/(t.mass+s.mass);t.vx-=V*s.mass*l,t.vy-=V*s.mass*u,s.vx+=V*t.mass*l,s.vy+=V*t.mass*u;const J=y-d,K=l*J*.5,Q=u*J*.5;t.x-=K,t.y-=Q,s.x+=K,s.y+=Q}else{const l=(y-d)/y;t.glowMultiplier=(t.glowMultiplier||1)+l*.5,s.glowMultiplier=(s.glowMultiplier||1)+l*.5;const u=l*.01;t.vx+=f*u,t.vy+=a*u,s.vx-=f*u,s.vy-=a*u}}t.x+=t.vx,t.y+=t.vy,t.vx+=(Math.random()-.5)*.001,t.vy+=(Math.random()-.5)*.001,t.vx*=.999,t.vy*=.999,t.x<0&&(t.x=e),t.x>e&&(t.x=0),t.y<0&&(t.y=o),t.y>o&&(t.y=0)}},[g.width,g.height,b,j,D,x,G,X]),$=r.useCallback(e=>{e.clearRect(0,0,e.canvas.width,e.canvas.height);const o=q();for(const n of h.current)e.save(),e.shadowColor=o,e.shadowBlur=B*(n.glowMultiplier||1)*2,e.globalAlpha=n.opacity,e.fillStyle=o,e.beginPath(),e.arc(n.x*z,n.y*z,n.size*z,0,Math.PI*2),e.fill(),e.restore()},[z,B,q]),F=r.useCallback(()=>{const e=C.current;if(!e)return;const o=e.getContext("2d");o&&(N(),$(o),v.current=requestAnimationFrame(F))},[N,$]);return r.useEffect(()=>{E();const e=R.current,o=typeof ResizeObserver<"u"?new ResizeObserver(E):null;e&&o&&o.observe(e);const n=()=>E();return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),o&&e&&o.disconnect()}},[E]),r.useEffect(()=>{h.current.length===0?k(g.width,g.height):h.current.forEach(e=>{e.baseOpacity=w,e.opacity=w;const o=Math.hypot(e.vx,e.vy);if(o>0){const n=m/o;e.vx*=n,e.vy*=n}})},[S,w,m,g.width,g.height,k]),r.useEffect(()=>(v.current&&cancelAnimationFrame(v.current),v.current=requestAnimationFrame(F),()=>{v.current&&cancelAnimationFrame(v.current),v.current=null}),[F]),T.jsx("div",{ref:R,"data-slot":"gravity-stars-background",className:et("relative size-full overflow-hidden",U),onMouseMove:e=>L(e),onTouchMove:e=>L(e),...W,children:T.jsx("canvas",{ref:C,className:"w-full h-full"})})}export{rt as GravityStarsBackground};
