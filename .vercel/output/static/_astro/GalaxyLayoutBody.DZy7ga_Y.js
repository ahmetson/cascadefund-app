import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as v,a as nt,g as rt,c as _e}from"./index.DxhH1ShK.js";import{N as ge}from"./NumberFlow-client-48rw3j0J.DO-Ted3l.js";import{m as fe}from"./proxy.DplwUDe6.js";import{C as $e}from"./ControlPanel.Chau5lFt.js";import{B as ne}from"./Button.CnXYplS9.js";import{C as Re,u as at,o as ot,f as st,s as it,a as lt,F as ct}from"./Tooltip.X-wb9Q3Q.js";import{P as ze}from"./PageLikePanel.BdB3gp9f.js";import{g as ut}from"./index.C9GdNTjf.js";import{C as dt}from"./Link.DQs8_5h1.js";import{c as Me}from"./utils.BnlJtBIq.js";import{g as pt}from"./slot.BJ0WR7bA.js";import{P as Te,u as gt}from"./use-controlled-state.pHAnEIiX.js";import{a as ft,c as ht,b as Le,P as De,d as ue,e as mt}from"./index.BAmrU33k.js";import{c as Ie,R as vt,A as Be,P as bt,h as xt,b as yt,a as wt,F as kt,D as Ft,C as Ct,d as At}from"./index.DaT2JCGZ.js";import{u as Et}from"./accordion.C2pAN9g7.js";import{A as _t}from"./index.BMZ1dBRY.js";import{g as xe}from"./demo.DsLEr97b.js";import{a as he}from"./virtual.VUcB3V37.js";import{G as ve}from"./galaxy.CumdPsiS.js";import"./Panel.n1yQPIfZ.js";import"./eventTypes.CfSurkCl.js";import"./ripple.CF16UbCB.js";import"./ElectricBorder.DAWLx7iV.js";import"./accordion.LYJqygqr.js";import"./createLucideIcon.C1tpinp8.js";import"./PanelAction.7HK8ne8S.js";import"./index.CqUFkXl9.js";import"./index.BugNjSvc.js";import"./index.DQANnUHg.js";import"./client.B9YBqyHK.js";var me="Popover",[Ke]=ht(me,[Ie]),de=Ie(),[jt,oe]=Ke(me),Ue=i=>{const{__scopePopover:u,children:n,open:g,defaultOpen:d,onOpenChange:h,modal:f=!1}=i,l=de(u),A=v.useRef(null),[j,E]=v.useState(!1),[C,S]=ft({prop:g,defaultProp:d??!1,onChange:h,caller:me});return e.jsx(vt,{...l,children:e.jsx(jt,{scope:u,contentId:Et(),triggerRef:A,open:C,onOpenChange:S,onOpenToggle:v.useCallback(()=>S(D=>!D),[S]),hasCustomAnchor:j,onCustomAnchorAdd:v.useCallback(()=>E(!0),[]),onCustomAnchorRemove:v.useCallback(()=>E(!1),[]),modal:f,children:n})})};Ue.displayName=me;var Ge="PopoverAnchor",St=v.forwardRef((i,u)=>{const{__scopePopover:n,...g}=i,d=oe(Ge,n),h=de(n),{onCustomAnchorAdd:f,onCustomAnchorRemove:l}=d;return v.useEffect(()=>(f(),()=>l()),[f,l]),e.jsx(Be,{...h,...g,ref:u})});St.displayName=Ge;var He="PopoverTrigger",We=v.forwardRef((i,u)=>{const{__scopePopover:n,...g}=i,d=oe(He,n),h=de(n),f=Le(u,d.triggerRef),l=e.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":d.open,"aria-controls":d.contentId,"data-state":Xe(d.open),...g,ref:f,onClick:ue(i.onClick,d.onOpenToggle)});return d.hasCustomAnchor?l:e.jsx(Be,{asChild:!0,...h,children:l})});We.displayName=He;var ye="PopoverPortal",[Pt,Nt]=Ke(ye,{forceMount:void 0}),Ye=i=>{const{__scopePopover:u,forceMount:n,children:g,container:d}=i,h=oe(ye,u);return e.jsx(Pt,{scope:u,forceMount:n,children:e.jsx(Te,{present:n||h.open,children:e.jsx(bt,{asChild:!0,container:d,children:g})})})};Ye.displayName=ye;var le="PopoverContent",qe=v.forwardRef((i,u)=>{const n=Nt(le,i.__scopePopover),{forceMount:g=n.forceMount,...d}=i,h=oe(le,i.__scopePopover);return e.jsx(Te,{present:g||h.open,children:h.modal?e.jsx($t,{...d,ref:u}):e.jsx(Rt,{...d,ref:u})})});qe.displayName=le;var Ot=mt("PopoverContent.RemoveScroll"),$t=v.forwardRef((i,u)=>{const n=oe(le,i.__scopePopover),g=v.useRef(null),d=Le(u,g),h=v.useRef(!1);return v.useEffect(()=>{const f=g.current;if(f)return xt(f)},[]),e.jsx(yt,{as:Ot,allowPinchZoom:!0,children:e.jsx(Ze,{...i,ref:d,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(i.onCloseAutoFocus,f=>{f.preventDefault(),h.current||n.triggerRef.current?.focus()}),onPointerDownOutside:ue(i.onPointerDownOutside,f=>{const l=f.detail.originalEvent,A=l.button===0&&l.ctrlKey===!0,j=l.button===2||A;h.current=j},{checkForDefaultPrevented:!1}),onFocusOutside:ue(i.onFocusOutside,f=>f.preventDefault(),{checkForDefaultPrevented:!1})})})}),Rt=v.forwardRef((i,u)=>{const n=oe(le,i.__scopePopover),g=v.useRef(!1),d=v.useRef(!1);return e.jsx(Ze,{...i,ref:u,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:h=>{i.onCloseAutoFocus?.(h),h.defaultPrevented||(g.current||n.triggerRef.current?.focus(),h.preventDefault()),g.current=!1,d.current=!1},onInteractOutside:h=>{i.onInteractOutside?.(h),h.defaultPrevented||(g.current=!0,h.detail.originalEvent.type==="pointerdown"&&(d.current=!0));const f=h.target;n.triggerRef.current?.contains(f)&&h.preventDefault(),h.detail.originalEvent.type==="focusin"&&d.current&&h.preventDefault()}})}),Ze=v.forwardRef((i,u)=>{const{__scopePopover:n,trapFocus:g,onOpenAutoFocus:d,onCloseAutoFocus:h,disableOutsidePointerEvents:f,onEscapeKeyDown:l,onPointerDownOutside:A,onFocusOutside:j,onInteractOutside:E,...C}=i,S=oe(le,n),D=de(n);return wt(),e.jsx(kt,{asChild:!0,loop:!0,trapped:g,onMountAutoFocus:d,onUnmountAutoFocus:h,children:e.jsx(Ft,{asChild:!0,disableOutsidePointerEvents:f,onInteractOutside:E,onEscapeKeyDown:l,onPointerDownOutside:A,onFocusOutside:j,onDismiss:()=>S.onOpenChange(!1),children:e.jsx(Ct,{"data-state":Xe(S.open),role:"dialog",id:S.contentId,...D,...C,ref:u,style:{...C.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Ve="PopoverClose",zt=v.forwardRef((i,u)=>{const{__scopePopover:n,...g}=i,d=oe(Ve,n);return e.jsx(De.button,{type:"button",...g,ref:u,onClick:ue(i.onClick,()=>d.onOpenChange(!1))})});zt.displayName=Ve;var Mt="PopoverArrow",Tt=v.forwardRef((i,u)=>{const{__scopePopover:n,...g}=i,d=de(n);return e.jsx(At,{...d,...g,ref:u})});Tt.displayName=Mt;function Xe(i){return i?"open":"closed"}var Lt=Ue,Dt=We,It=Ye,Bt=qe;const Kt=({virtualScreenSize:i,className:u="",interval:n=10})=>{const[g,d]=v.useState({width:0,height:0});v.useEffect(()=>{g.width===0&&g.height===0&&d(i)},[i,g]);const h=A=>{const j=[],E=Math.floor(A/n);for(let C=1;C<=n;C++){const S=(C-1)*E;j.push({key:C,position:S,percentage:C*n})}return j},f=v.useMemo(()=>({width:h(i.width),height:h(i.height)}),[i.width,i.height,n]),l=(A,j)=>A.map(({key:E,position:C,percentage:S})=>e.jsx(fe.div,{className:`absolute text-[10px] font-mono text-slate-400 dark:text-slate-500 ${j?"top-10":"left-0"}`,initial:!1,animate:j?{top:`${S}%`}:{left:`${S}%`},transition:{duration:.3,ease:"easeOut"},style:j?{transform:"translateY(-50%)"}:{transform:"translateX(-50%)"},children:e.jsx(ge,{value:C,locales:"en-US",format:{style:"decimal",maximumFractionDigits:0,useGrouping:!1}})},E));return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`fixed top-10 left-0 right-0 h-6 backdrop-blur-lg pointer-events-none z-40 ${u}`,children:[l(f.width,!1),e.jsxs(fe.div,{className:"absolute right-8 top-4 text-[10px] font-mono text-slate-400 dark:text-slate-500",initial:!1,transition:{duration:.3,ease:"easeOut"},children:["W:"," ",e.jsx(ge,{value:i.width,locales:"en-US",format:{style:"decimal",maximumFractionDigits:0,useGrouping:!1}}),"px"]})]}),e.jsx("div",{className:`fixed bottom-8 left-0 right-0 h-6 backdrop-blur-lg pointer-events-none z-40 ${u}`,children:l(f.width,!1)}),e.jsxs("div",{className:`fixed top-10 bottom-8 left-1 w-6 backdrop-blur-lg pointer-events-none z-40 ${u}`,children:[l(f.height,!0),e.jsxs(fe.div,{className:"absolute bottom-8 left-8 w-20 border-red-500 text-[10px] font-mono text-slate-400 dark:text-slate-500",initial:!1,transition:{duration:.3,ease:"easeOut"},children:["H:"," ",e.jsx(ge,{value:i.height,locales:"en-US",format:{style:"decimal",maximumFractionDigits:0,useGrouping:!1}}),"px"]})]}),e.jsx("div",{className:`fixed top-10 bottom-8 right-0 w-6 backdrop-blur-lg pointer-events-none z-40 ${u}`,children:l(f.height,!0)})]})},Ut=({initialZoom:i=100,minZoom:u=25,maxZoom:n=100,stepSize:g=10,onZoomChange:d})=>{const[h,f]=v.useState(i);v.useEffect(()=>{f(i)},[i]),v.useEffect(()=>{d?.(h)},[h,d]);const l=()=>{f(C=>Math.min(C+g,n))},A=()=>{f(C=>Math.max(C-g,u))},j=C=>{f(Number(C.target.value))},E=()=>{f(100)};return e.jsxs("div",{className:"fixed bottom-22 left-8 z-50",children:[e.jsx($e,{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{variant:"secondary",size:"sm",onClick:A,disabled:h<=u,outline:!0,className:"p-1.5 min-w-[32px] h-8 flex items-center justify-center","aria-label":"Zoom out",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4"})})}),e.jsxs("div",{className:"flex flex-col items-center gap-1 min-w-[120px]",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-xs text-slate-400 dark:text-slate-500 font-mono",children:[e.jsx(ge,{value:h,locales:"en-US",format:{style:"decimal",maximumFractionDigits:0,useGrouping:!1}}),"%"]}),h!==100&&e.jsx(Re,{content:"Reset to 100%",children:e.jsx(ne,{variant:"secondary",size:"sm",onClick:E,outline:!0,className:"p-1 min-w-[24px] h-6 flex items-center justify-center","aria-label":"Reset to 100%",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})})]}),e.jsx("input",{type:"range",min:u,max:n,value:h,onChange:j,className:"w-full h-1.5 bg-slate-700/50 dark:bg-slate-300/30 rounded-lg appearance-none cursor-pointer slider",style:{background:`linear-gradient(to right, rgb(59 130 246) 0%, rgb(59 130 246) ${(h-u)/(n-u)*100}%, rgb(51 65 85 / 0.5) ${(h-u)/(n-u)*100}%, rgb(51 65 85 / 0.5) 100%)`}})]}),e.jsx(ne,{variant:"secondary",size:"sm",onClick:l,disabled:h>=n,outline:!0,className:"p-1.5 min-w-[32px] h-8 flex items-center justify-center","aria-label":"Zoom in",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})}),e.jsx("style",{dangerouslySetInnerHTML:{__html:`
        .slider::-webkit-slider-thumb {
          appearance: none;
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: rgb(59 130 246);
          cursor: pointer;
          border: 2px solid rgb(30 41 59);
          box-shadow: 0 0 4px rgba(59, 130, 246, 0.5);
        }

        .slider::-moz-range-thumb {
          width: 14px;
          height: 14px;
          border-radius: 50%;
          background: rgb(59 130 246);
          cursor: pointer;
          border: 2px solid rgb(30 41 59);
          box-shadow: 0 0 4px rgba(59, 130, 246, 0.5);
        }
      `}})]})},Gt=({projectName:i,isOpen:u,onConfirm:n,onCancel:g})=>u?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-black/50 backdrop-blur-sm z-100",onClick:g}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 inset-0 z-101 flex items-center justify-center",children:e.jsxs(ze,{title:"Leave Galaxy?",titleCenter:!0,children:[e.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-6 text-lg",children:["You are about to leave the ",e.jsxs("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:['"',i,'"']})," galaxy to go to ",e.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"'Ara All Stars'"}),"."]}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx(ne,{variant:"secondary",onClick:g,size:"md",children:"No"}),e.jsx(ne,{variant:"primary",onClick:n,size:"md",children:"Yes"})]})]})})]}):null,Ht=({className:i="",projectId:u})=>{const n=u?`/all-stars?galaxy=${u}`:"/all-stars";return e.jsx("div",{className:`fixed bottom-36 left-8 z-50 ${i}`,children:e.jsx(Re,{content:e.jsx(ze,{title:"Go to 'All Stars', page with all galaxies",icon:"info",className:"flex items-center gap-2 text-sm bg-transparent dark:bg-transparent border-none dark:border-none",children:e.jsx("span",{children:"Also, zooming to the minimum viewport in zoom controller will open the 'All Stars' page."})}),children:e.jsx(dt,{uri:n,children:e.jsx($e,{className:Me("p-3 transition-all duration-300","!backdrop-blur-none hover:!backdrop-blur-lg"),children:e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 dark:text-slate-500",children:[ut({iconType:"ara",className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-mono",children:"All Stars"})]})})})})})},[Wt,Yt]=pt("PopoverContext");function qt(i){const[u,n]=gt({value:i?.open,defaultValue:i?.defaultOpen,onChange:i?.onOpenChange});return e.jsx(Wt,{value:{isOpen:u,setIsOpen:n},children:e.jsx(Lt,{"data-slot":"popover",...i,onOpenChange:n})})}function Zt(i){return e.jsx(Dt,{"data-slot":"popover-trigger",...i})}function Vt(i){const{isOpen:u}=Yt();return e.jsx(_t,{children:u&&e.jsx(It,{forceMount:!0,"data-slot":"popover-portal",...i})})}function Xt({onOpenAutoFocus:i,onCloseAutoFocus:u,onEscapeKeyDown:n,onPointerDownOutside:g,onFocusOutside:d,onInteractOutside:h,align:f,alignOffset:l,side:A,sideOffset:j,avoidCollisions:E,collisionBoundary:C,collisionPadding:S,arrowPadding:D,sticky:q,hideWhenDetached:k,transition:_={type:"spring",stiffness:300,damping:25},...T}){return e.jsx(Bt,{asChild:!0,forceMount:!0,align:f,alignOffset:l,side:A,sideOffset:j,avoidCollisions:E,collisionBoundary:C,collisionPadding:S,arrowPadding:D,sticky:q,hideWhenDetached:k,onOpenAutoFocus:i,onCloseAutoFocus:u,onEscapeKeyDown:n,onPointerDownOutside:g,onInteractOutside:h,onFocusOutside:d,children:e.jsx(fe.div,{"data-slot":"popover-content",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:_,...T},"popover-content")})}function Jt(i){return e.jsx(qt,{...i})}function Qt(i){return e.jsx(Zt,{...i})}function en({className:i,align:u="center",sideOffset:n=4,...g}){return e.jsx(Vt,{children:e.jsx(Xt,{align:u,sideOffset:n,className:Me("bg-popover text-popover-foreground z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",i),...g})})}async function Je(i){try{const u=xe();if(!u.email)return[];const n=await he.getPersonalizations({context:i,email:u.email});return n.data?.success&&n.data.data?n.data.data:[]}catch(u){return console.error("Error getting personalizations:",u),[]}}async function Qe(i,u,n){try{const g=xe();if(!g.email)return{success:!1,error:"User not logged in"};const d=await he.generatePersonalizationCode({prompt:i,context:u,componentStructure:n,email:g.email});return d.data?.success&&d.data.code?{success:!0,code:d.data.code,uris:d.data.uris||[]}:{success:!1,error:d.data?.error||"Failed to generate code"}}catch(g){return console.error("Error generating code:",g),{success:!1,error:"An error occurred"}}}async function tn(i,u,n,g,d){try{const h=xe();if(!h.email)return{success:!1,error:"User not logged in"};const f=await he.savePersonalization({context:i,code:u,prompt:n,uris:g,email:h.email,personalizationId:d});return f.data?.success?{success:!0}:{success:!1,error:f.data?.error||"Failed to save"}}catch(h){return console.error("Error saving personalization:",h),{success:!1,error:"An error occurred"}}}async function nn(i){try{return(await he.deletePersonalization({personalizationId:i})).data?.success||!1}catch(u){return console.error("Error deleting personalization:",u),!1}}const je=[{name:"GalaxyZoomControls",description:"Zoom controls for the galaxy view"},{name:"GalacticMeasurements",description:"Measurements and grid display"},{name:"GalaxyNavigationDialog",description:"Navigation dialog when zoomed out"},{name:"AllStarsLink",description:"Link to all stars page"}],rn=({onTestModeChange:i,onCodeGenerated:u,onLoadPersonalization:n,onClose:g})=>{const[d,h]=v.useState(""),[f,l]=v.useState(!1),[A,j]=v.useState([]),[E,C]=v.useState(null);v.useEffect(()=>{S()},[]);const S=async()=>{const k=await Je("GalaxyLayoutBody");j(k)},D=async()=>{if(d.trim()){l(!0),C(null);try{const k=je.map(T=>T.name),_=await Qe(d,"GalaxyLayoutBody",k);_.success&&_.code?(u?.(_.code,d,_.uris),i?.(!0),h("")):C(_.error||"Failed to generate code")}catch(k){C("An error occurred"),console.error(k)}finally{l(!1)}}},q=async k=>{await nn(k)&&S()};return e.jsxs("div",{className:"p-6 space-y-6 relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/5 to-pink-500/10 rounded-lg pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mb-6",children:"Galaxy Layout Settings"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-3 text-blue-300 dark:text-blue-400",children:"Available Elements:"}),e.jsx("div",{className:"space-y-2",children:je.map(k=>e.jsxs("div",{className:"text-xs p-3 backdrop-blur-sm bg-white/10 dark:bg-slate-800/30 rounded-lg border border-blue-500/20 dark:border-blue-400/20 hover:bg-white/20 dark:hover:bg-slate-800/40 transition-all",children:[e.jsx("div",{className:"font-mono font-semibold text-blue-200 dark:text-blue-300",children:k.name}),e.jsx("div",{className:"text-slate-300 dark:text-slate-400 mt-1",children:k.description})]},k.name))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-3 text-blue-300 dark:text-blue-400",children:"Customize with AI:"}),e.jsx("textarea",{value:d,onChange:k=>h(k.target.value),placeholder:"e.g., set zoom at 50% by default, but if I see the 'Ara App' project, then set the zoom at 10%",className:"w-full p-3 border border-blue-500/30 dark:border-blue-400/30 rounded-lg text-sm resize-none backdrop-blur-sm bg-white/10 dark:bg-slate-800/30 text-slate-200 dark:text-slate-300 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all",rows:3}),e.jsx(ne,{onClick:D,disabled:!d.trim()||f,className:"mt-3 w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 border-none shadow-lg shadow-blue-500/30",children:f?"Generating...":"Generate Code"}),E&&e.jsx("div",{className:"mt-2 text-sm text-red-400 dark:text-red-300 bg-red-500/10 border border-red-500/30 rounded p-2",children:E})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-3 text-blue-300 dark:text-blue-400",children:"History:"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:A.length===0?e.jsx("div",{className:"text-sm text-slate-400 dark:text-slate-500 text-center py-4",children:"No saved customizations"}):A.map(k=>e.jsxs("div",{className:"p-3 backdrop-blur-sm bg-white/10 dark:bg-slate-800/30 rounded-lg border border-blue-500/20 dark:border-blue-400/20 hover:bg-white/20 dark:hover:bg-slate-800/40 transition-all text-xs",children:[e.jsx("button",{onClick:()=>n?.(k),className:"font-semibold mb-1 text-blue-200 dark:text-blue-300 hover:text-blue-100 dark:hover:text-blue-200 cursor-pointer text-left w-full hover:underline transition-colors",children:k.prompt}),e.jsx("div",{className:"text-slate-300 dark:text-slate-400 mb-1",children:new Date(k.createdTime).toLocaleString()}),e.jsxs("div",{className:"text-slate-300 dark:text-slate-400 mb-2",children:["URIs: ",k.uris.join(", ")]}),e.jsx(ne,{onClick:()=>k._id&&q(k._id),variant:"secondary",size:"sm",className:"text-xs bg-red-500/20 hover:bg-red-500/30 border-red-500/30 text-red-300",children:"Delete"})]},k._id))})]})]})]})},an=({onTestModeChange:i,onCodeGenerated:u,onLoadPersonalization:n,buttonRef:g,isTestMode:d=!1})=>{const[h,f]=v.useState(!1),l=v.useRef(null),A=g||l,j=E=>{d&&!E||f(E)};return v.useEffect(()=>{d&&!h&&f(!0)},[d,h]),e.jsx("div",{className:`${d?"absolute":"fixed"} bottom-32 left-[300px] z-50`,children:e.jsxs(Jt,{open:h,onOpenChange:j,children:[e.jsx(Qt,{asChild:!0,children:e.jsx("button",{ref:A,type:"button",className:`relative w-3 h-3 rounded-full bg-blue-600 dark:bg-blue-500 
                       flex items-center justify-center
                       shadow-lg hover:shadow-xl transition-shadow
                       border border-blue-400 dark:border-blue-300
                       cursor-pointer
                       animate-pulse`,"aria-label":"Galaxy Layout Settings",title:"Settings of the GalaxyLayoutBody",style:{boxShadow:"0 0 4px rgba(59, 130, 246, 0.5), 0 0 8px rgba(59, 130, 246, 0.3), 0 0 12px rgba(59, 130, 246, 0.2)"},children:e.jsx("svg",{className:"w-2 h-2 text-white pointer-events-none",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})})}),e.jsx(en,{className:`w-96 max-h-[80vh] overflow-y-auto backdrop-blur-xl bg-white/20 dark:bg-slate-900/20 border border-blue-500/30 dark:border-blue-400/30 shadow-2xl shadow-blue-500/20 ${d?"pointer-events-auto":""}`,align:"start",onPointerDownOutside:E=>{d&&E.preventDefault()},onInteractOutside:E=>{d&&E.preventDefault()},onEscapeKeyDown:E=>{d&&E.preventDefault()},children:e.jsx(rn,{onTestModeChange:i,onCodeGenerated:u,onLoadPersonalization:n,onClose:()=>{d||f(!1)}})})]})})};var X={},Se;function on(){if(Se)return X;Se=1;var i=X&&X.__extends||(function(){var w=function(F,o){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,x){t.__proto__=x}||function(t,x){for(var L in x)Object.prototype.hasOwnProperty.call(x,L)&&(t[L]=x[L])},w(F,o)};return function(F,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");w(F,o);function t(){this.constructor=F}F.prototype=o===null?Object.create(o):(t.prototype=o.prototype,new t)}})(),u=X&&X.__assign||function(){return u=Object.assign||function(w){for(var F,o=1,t=arguments.length;o<t;o++){F=arguments[o];for(var x in F)Object.prototype.hasOwnProperty.call(F,x)&&(w[x]=F[x])}return w},u.apply(this,arguments)},n=X&&X.__createBinding||(Object.create?(function(w,F,o,t){t===void 0&&(t=o);var x=Object.getOwnPropertyDescriptor(F,o);(!x||("get"in x?!F.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return F[o]}}),Object.defineProperty(w,t,x)}):(function(w,F,o,t){t===void 0&&(t=o),w[t]=F[o]})),g=X&&X.__setModuleDefault||(Object.create?(function(w,F){Object.defineProperty(w,"default",{enumerable:!0,value:F})}):function(w,F){w.default=F}),d=X&&X.__importStar||function(w){if(w&&w.__esModule)return w;var F={};if(w!=null)for(var o in w)o!=="default"&&Object.prototype.hasOwnProperty.call(w,o)&&n(F,w,o);return g(F,w),F},h=X&&X.__rest||function(w,F){var o={};for(var t in w)Object.prototype.hasOwnProperty.call(w,t)&&F.indexOf(t)<0&&(o[t]=w[t]);if(w!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,t=Object.getOwnPropertySymbols(w);x<t.length;x++)F.indexOf(t[x])<0&&Object.prototype.propertyIsEnumerable.call(w,t[x])&&(o[t[x]]=w[t[x]]);return o};Object.defineProperty(X,"__esModule",{value:!0});var f=d(nt()),l=13,A=9,j=8,E=89,C=90,S=77,D=57,q=219,k=222,_=192,T=27,r=100,a=3e3,p=typeof window<"u"&&"navigator"in window&&/Win/i.test(navigator.platform),s=typeof window<"u"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),c="npm__react-simple-code-editor__textarea",b=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat(c,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat(c,` {
    color: transparent !important;
  }

  .`).concat(c,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),P=(function(w){i(F,w);function F(){var o=w!==null&&w.apply(this,arguments)||this;return o.state={capture:!0},o._recordCurrentState=function(){var t=o._input;if(t){var x=t.value,L=t.selectionStart,R=t.selectionEnd;o._recordChange({value:x,selectionStart:L,selectionEnd:R})}},o._getLines=function(t,x){return t.substring(0,x).split(`
`)},o._recordChange=function(t,x){var L,R,ee;x===void 0&&(x=!1);var K=o._history,W=K.stack,z=K.offset;if(W.length&&z>-1){o._history.stack=W.slice(0,z+1);var O=o._history.stack.length;if(O>r){var M=O-r;o._history.stack=W.slice(M,O),o._history.offset=Math.max(o._history.offset-M,0)}}var G=Date.now();if(x){var H=o._history.stack[o._history.offset];if(H&&G-H.timestamp<a){var J=/[^a-z0-9]([a-z0-9]+)$/i,Q=(L=o._getLines(H.value,H.selectionStart).pop())===null||L===void 0?void 0:L.match(J),V=(R=o._getLines(t.value,t.selectionStart).pop())===null||R===void 0?void 0:R.match(J);if(Q?.[1]&&(!((ee=V?.[1])===null||ee===void 0)&&ee.startsWith(Q[1]))){o._history.stack[o._history.offset]=u(u({},t),{timestamp:G});return}}}o._history.stack.push(u(u({},t),{timestamp:G})),o._history.offset++},o._updateInput=function(t){var x=o._input;x&&(x.value=t.value,x.selectionStart=t.selectionStart,x.selectionEnd=t.selectionEnd,o.props.onValueChange(t.value))},o._applyEdits=function(t){var x=o._input,L=o._history.stack[o._history.offset];L&&x&&(o._history.stack[o._history.offset]=u(u({},L),{selectionStart:x.selectionStart,selectionEnd:x.selectionEnd})),o._recordChange(t),o._updateInput(t)},o._undoEdit=function(){var t=o._history,x=t.stack,L=t.offset,R=x[L-1];R&&(o._updateInput(R),o._history.offset=Math.max(L-1,0))},o._redoEdit=function(){var t=o._history,x=t.stack,L=t.offset,R=x[L+1];R&&(o._updateInput(R),o._history.offset=Math.min(L+1,x.length-1))},o._handleKeyDown=function(t){var x=o.props,L=x.tabSize,R=x.insertSpaces,ee=x.ignoreTabKey,K=x.onKeyDown;if(!(K&&(K(t),t.defaultPrevented))){t.keyCode===T&&t.currentTarget.blur();var W=t.currentTarget,z=W.value,O=W.selectionStart,M=W.selectionEnd,G=(R?" ":"	").repeat(L);if(t.keyCode===A&&!ee&&o.state.capture)if(t.preventDefault(),t.shiftKey){var H=o._getLines(z,O),J=H.length-1,Q=o._getLines(z,M).length-1,V=z.split(`
`).map(function(Z,se){return se>=J&&se<=Q&&Z.startsWith(G)?Z.substring(G.length):Z}).join(`
`);if(z!==V){var te=H[J];o._applyEdits({value:V,selectionStart:te?.startsWith(G)?O-G.length:O,selectionEnd:M-(z.length-V.length)})}}else if(O!==M){var H=o._getLines(z,O),re=H.length-1,ae=o._getLines(z,M).length-1,te=H[re];o._applyEdits({value:z.split(`
`).map(function(ce,ie){return ie>=re&&ie<=ae?G+ce:ce}).join(`
`),selectionStart:te&&/\S/.test(te)?O+G.length:O,selectionEnd:M+G.length*(ae-re+1)})}else{var m=O+G.length;o._applyEdits({value:z.substring(0,O)+G+z.substring(M),selectionStart:m,selectionEnd:m})}else if(t.keyCode===j){var $=O!==M,N=z.substring(0,O);if(N.endsWith(G)&&!$){t.preventDefault();var m=O-G.length;o._applyEdits({value:z.substring(0,O-G.length)+z.substring(M),selectionStart:m,selectionEnd:m})}}else if(t.keyCode===l){if(O===M){var B=o._getLines(z,O).pop(),Y=B?.match(/^\s+/);if(Y?.[0]){t.preventDefault();var U=`
`+Y[0],m=O+U.length;o._applyEdits({value:z.substring(0,O)+U+z.substring(M),selectionStart:m,selectionEnd:m})}}}else if(t.keyCode===D||t.keyCode===q||t.keyCode===k||t.keyCode===_){var I=void 0;t.keyCode===D&&t.shiftKey?I=["(",")"]:t.keyCode===q?t.shiftKey?I=["{","}"]:I=["[","]"]:t.keyCode===k?t.shiftKey?I=['"','"']:I=["'","'"]:t.keyCode===_&&!t.shiftKey&&(I=["`","`"]),O!==M&&I&&(t.preventDefault(),o._applyEdits({value:z.substring(0,O)+I[0]+z.substring(O,M)+I[1]+z.substring(M),selectionStart:O,selectionEnd:M+2}))}else(s?t.metaKey&&t.keyCode===C:t.ctrlKey&&t.keyCode===C)&&!t.shiftKey&&!t.altKey?(t.preventDefault(),o._undoEdit()):(s?t.metaKey&&t.keyCode===C&&t.shiftKey:p?t.ctrlKey&&t.keyCode===E:t.ctrlKey&&t.keyCode===C&&t.shiftKey)&&!t.altKey?(t.preventDefault(),o._redoEdit()):t.keyCode===S&&t.ctrlKey&&(!s||t.shiftKey)&&(t.preventDefault(),o.setState(function(Z){return{capture:!Z.capture}}))}},o._handleChange=function(t){var x=t.currentTarget,L=x.value,R=x.selectionStart,ee=x.selectionEnd;o._recordChange({value:L,selectionStart:R,selectionEnd:ee},!0),o.props.onValueChange(L)},o._history={stack:[],offset:-1},o._input=null,o}return F.prototype.componentDidMount=function(){this._recordCurrentState()},Object.defineProperty(F.prototype,"session",{get:function(){return{history:this._history}},set:function(o){this._history=o.history},enumerable:!1,configurable:!0}),F.prototype.render=function(){var o=this,t=this.props,x=t.value,L=t.style,R=t.padding,ee=t.highlight,K=t.textareaId,W=t.textareaClassName,z=t.autoFocus,O=t.disabled,M=t.form,G=t.maxLength,H=t.minLength,J=t.name,Q=t.placeholder,V=t.readOnly,te=t.required,re=t.onClick,ae=t.onFocus,m=t.onBlur,$=t.onKeyUp;t.onKeyDown,t.onValueChange,t.tabSize,t.insertSpaces,t.ignoreTabKey;var N=t.preClassName,B=h(t,["value","style","padding","highlight","textareaId","textareaClassName","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey","preClassName"]),Y={paddingTop:typeof R=="object"?R.top:R,paddingRight:typeof R=="object"?R.right:R,paddingBottom:typeof R=="object"?R.bottom:R,paddingLeft:typeof R=="object"?R.left:R},U=ee(x);return f.createElement("div",u({},B,{style:u(u({},y.container),L)}),f.createElement("pre",u({className:N,"aria-hidden":"true",style:u(u(u({},y.editor),y.highlight),Y)},typeof U=="string"?{dangerouslySetInnerHTML:{__html:U+"<br />"}}:{children:U})),f.createElement("textarea",{ref:function(I){return o._input=I},style:u(u(u({},y.editor),y.textarea),Y),className:c+(W?" ".concat(W):""),id:K,value:x,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:re,onKeyUp:$,onFocus:ae,onBlur:m,disabled:O,form:M,maxLength:G,minLength:H,name:J,placeholder:Q,readOnly:V,required:te,autoFocus:z,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),f.createElement("style",{dangerouslySetInnerHTML:{__html:b}}))},F.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},F})(f.Component);X.default=P;var y={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};return X}var sn=on();const ln=rt(sn);var be={exports:{}},Pe;function cn(){return Pe||(Pe=1,(function(i){var u=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=(function(g){var d=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,h=0,f={},l={manual:g.Prism&&g.Prism.manual,disableWorkerMessageHandler:g.Prism&&g.Prism.disableWorkerMessageHandler,util:{encode:function r(a){return a instanceof A?new A(a.type,r(a.content),a.alias):Array.isArray(a)?a.map(r):a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(r){return Object.prototype.toString.call(r).slice(8,-1)},objId:function(r){return r.__id||Object.defineProperty(r,"__id",{value:++h}),r.__id},clone:function r(a,p){p=p||{};var s,c;switch(l.util.type(a)){case"Object":if(c=l.util.objId(a),p[c])return p[c];s={},p[c]=s;for(var b in a)a.hasOwnProperty(b)&&(s[b]=r(a[b],p));return s;case"Array":return c=l.util.objId(a),p[c]?p[c]:(s=[],p[c]=s,a.forEach(function(P,y){s[y]=r(P,p)}),s);default:return a}},getLanguage:function(r){for(;r;){var a=d.exec(r.className);if(a)return a[1].toLowerCase();r=r.parentElement}return"none"},setLanguage:function(r,a){r.className=r.className.replace(RegExp(d,"gi"),""),r.classList.add("language-"+a)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(s){var r=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(s.stack)||[])[1];if(r){var a=document.getElementsByTagName("script");for(var p in a)if(a[p].src==r)return a[p]}return null}},isActive:function(r,a,p){for(var s="no-"+a;r;){var c=r.classList;if(c.contains(a))return!0;if(c.contains(s))return!1;r=r.parentElement}return!!p}},languages:{plain:f,plaintext:f,text:f,txt:f,extend:function(r,a){var p=l.util.clone(l.languages[r]);for(var s in a)p[s]=a[s];return p},insertBefore:function(r,a,p,s){s=s||l.languages;var c=s[r],b={};for(var P in c)if(c.hasOwnProperty(P)){if(P==a)for(var y in p)p.hasOwnProperty(y)&&(b[y]=p[y]);p.hasOwnProperty(P)||(b[P]=c[P])}var w=s[r];return s[r]=b,l.languages.DFS(l.languages,function(F,o){o===w&&F!=r&&(this[F]=b)}),b},DFS:function r(a,p,s,c){c=c||{};var b=l.util.objId;for(var P in a)if(a.hasOwnProperty(P)){p.call(a,P,a[P],s||P);var y=a[P],w=l.util.type(y);w==="Object"&&!c[b(y)]?(c[b(y)]=!0,r(y,p,null,c)):w==="Array"&&!c[b(y)]&&(c[b(y)]=!0,r(y,p,P,c))}}},plugins:{},highlightAll:function(r,a){l.highlightAllUnder(document,r,a)},highlightAllUnder:function(r,a,p){var s={callback:p,container:r,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",s),s.elements=Array.prototype.slice.apply(s.container.querySelectorAll(s.selector)),l.hooks.run("before-all-elements-highlight",s);for(var c=0,b;b=s.elements[c++];)l.highlightElement(b,a===!0,s.callback)},highlightElement:function(r,a,p){var s=l.util.getLanguage(r),c=l.languages[s];l.util.setLanguage(r,s);var b=r.parentElement;b&&b.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(b,s);var P=r.textContent,y={element:r,language:s,grammar:c,code:P};function w(o){y.highlightedCode=o,l.hooks.run("before-insert",y),y.element.innerHTML=y.highlightedCode,l.hooks.run("after-highlight",y),l.hooks.run("complete",y),p&&p.call(y.element)}if(l.hooks.run("before-sanity-check",y),b=y.element.parentElement,b&&b.nodeName.toLowerCase()==="pre"&&!b.hasAttribute("tabindex")&&b.setAttribute("tabindex","0"),!y.code){l.hooks.run("complete",y),p&&p.call(y.element);return}if(l.hooks.run("before-highlight",y),!y.grammar){w(l.util.encode(y.code));return}if(a&&g.Worker){var F=new Worker(l.filename);F.onmessage=function(o){w(o.data)},F.postMessage(JSON.stringify({language:y.language,code:y.code,immediateClose:!0}))}else w(l.highlight(y.code,y.grammar,y.language))},highlight:function(r,a,p){var s={code:r,grammar:a,language:p};if(l.hooks.run("before-tokenize",s),!s.grammar)throw new Error('The language "'+s.language+'" has no grammar.');return s.tokens=l.tokenize(s.code,s.grammar),l.hooks.run("after-tokenize",s),A.stringify(l.util.encode(s.tokens),s.language)},tokenize:function(r,a){var p=a.rest;if(p){for(var s in p)a[s]=p[s];delete a.rest}var c=new C;return S(c,c.head,r),E(r,c,a,c.head,0),q(c)},hooks:{all:{},add:function(r,a){var p=l.hooks.all;p[r]=p[r]||[],p[r].push(a)},run:function(r,a){var p=l.hooks.all[r];if(!(!p||!p.length))for(var s=0,c;c=p[s++];)c(a)}},Token:A};g.Prism=l;function A(r,a,p,s){this.type=r,this.content=a,this.alias=p,this.length=(s||"").length|0}A.stringify=function r(a,p){if(typeof a=="string")return a;if(Array.isArray(a)){var s="";return a.forEach(function(w){s+=r(w,p)}),s}var c={type:a.type,content:r(a.content,p),tag:"span",classes:["token",a.type],attributes:{},language:p},b=a.alias;b&&(Array.isArray(b)?Array.prototype.push.apply(c.classes,b):c.classes.push(b)),l.hooks.run("wrap",c);var P="";for(var y in c.attributes)P+=" "+y+'="'+(c.attributes[y]||"").replace(/"/g,"&quot;")+'"';return"<"+c.tag+' class="'+c.classes.join(" ")+'"'+P+">"+c.content+"</"+c.tag+">"};function j(r,a,p,s){r.lastIndex=a;var c=r.exec(p);if(c&&s&&c[1]){var b=c[1].length;c.index+=b,c[0]=c[0].slice(b)}return c}function E(r,a,p,s,c,b){for(var P in p)if(!(!p.hasOwnProperty(P)||!p[P])){var y=p[P];y=Array.isArray(y)?y:[y];for(var w=0;w<y.length;++w){if(b&&b.cause==P+","+w)return;var F=y[w],o=F.inside,t=!!F.lookbehind,x=!!F.greedy,L=F.alias;if(x&&!F.pattern.global){var R=F.pattern.toString().match(/[imsuy]*$/)[0];F.pattern=RegExp(F.pattern.source,R+"g")}for(var ee=F.pattern||F,K=s.next,W=c;K!==a.tail&&!(b&&W>=b.reach);W+=K.value.length,K=K.next){var z=K.value;if(a.length>r.length)return;if(!(z instanceof A)){var O=1,M;if(x){if(M=j(ee,W,r,t),!M||M.index>=r.length)break;var Q=M.index,G=M.index+M[0].length,H=W;for(H+=K.value.length;Q>=H;)K=K.next,H+=K.value.length;if(H-=K.value.length,W=H,K.value instanceof A)continue;for(var J=K;J!==a.tail&&(H<G||typeof J.value=="string");J=J.next)O++,H+=J.value.length;O--,z=r.slice(W,H),M.index-=W}else if(M=j(ee,0,z,t),!M)continue;var Q=M.index,V=M[0],te=z.slice(0,Q),re=z.slice(Q+V.length),ae=W+z.length;b&&ae>b.reach&&(b.reach=ae);var m=K.prev;te&&(m=S(a,m,te),W+=te.length),D(a,m,O);var $=new A(P,o?l.tokenize(V,o):V,L,V);if(K=S(a,m,$),re&&S(a,K,re),O>1){var N={cause:P+","+w,reach:ae};E(r,a,p,K.prev,W,N),b&&N.reach>b.reach&&(b.reach=N.reach)}}}}}}function C(){var r={value:null,prev:null,next:null},a={value:null,prev:r,next:null};r.next=a,this.head=r,this.tail=a,this.length=0}function S(r,a,p){var s=a.next,c={value:p,prev:a,next:s};return a.next=c,s.prev=c,r.length++,c}function D(r,a,p){for(var s=a.next,c=0;c<p&&s!==r.tail;c++)s=s.next;a.next=s,s.prev=a,r.length-=c}function q(r){for(var a=[],p=r.head.next;p!==r.tail;)a.push(p.value),p=p.next;return a}if(!g.document)return g.addEventListener&&(l.disableWorkerMessageHandler||g.addEventListener("message",function(r){var a=JSON.parse(r.data),p=a.language,s=a.code,c=a.immediateClose;g.postMessage(l.highlight(s,l.languages[p],p)),c&&g.close()},!1)),l;var k=l.util.currentScript();k&&(l.filename=k.src,k.hasAttribute("data-manual")&&(l.manual=!0));function _(){l.manual||l.highlightAll()}if(!l.manual){var T=document.readyState;T==="loading"||T==="interactive"&&k&&k.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return l})(u);i.exports&&(i.exports=n),typeof _e<"u"&&(_e.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(g){g.type==="entity"&&(g.attributes.title=g.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(d,h){var f={};f["language-"+h]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[h]},f.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:f}};l["language-"+h]={pattern:/[\s\S]+/,inside:n.languages[h]};var A={};A[d]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return d}),"i"),lookbehind:!0,greedy:!0,inside:l},n.languages.insertBefore("markup","cdata",A)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(g,d){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+g+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[d,"language-"+d],inside:n.languages[d]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,(function(g){var d=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;g.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+d.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+d.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+d.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+d.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:d,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},g.languages.css.atrule.inside.rest=g.languages.css;var h=g.languages.markup;h&&(h.tag.addInlined("style","css"),h.tag.addAttribute("style","css"))})(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,(function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var g="Loading…",d=function(k,_){return"✖ Error "+k+" while fetching file: "+_},h="✖ Error: File does not exist or is empty",f={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",A="loading",j="loaded",E="failed",C="pre[data-src]:not(["+l+'="'+j+'"]):not(['+l+'="'+A+'"])';function S(k,_,T){var r=new XMLHttpRequest;r.open("GET",k,!0),r.onreadystatechange=function(){r.readyState==4&&(r.status<400&&r.responseText?_(r.responseText):r.status>=400?T(d(r.status,r.statusText)):T(h))},r.send(null)}function D(k){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(k||"");if(_){var T=Number(_[1]),r=_[2],a=_[3];return r?a?[T,Number(a)]:[T,void 0]:[T,T]}}n.hooks.add("before-highlightall",function(k){k.selector+=", "+C}),n.hooks.add("before-sanity-check",function(k){var _=k.element;if(_.matches(C)){k.code="",_.setAttribute(l,A);var T=_.appendChild(document.createElement("CODE"));T.textContent=g;var r=_.getAttribute("data-src"),a=k.language;if(a==="none"){var p=(/\.(\w+)$/.exec(r)||[,"none"])[1];a=f[p]||p}n.util.setLanguage(T,a),n.util.setLanguage(_,a);var s=n.plugins.autoloader;s&&s.loadLanguages(a),S(r,function(c){_.setAttribute(l,j);var b=D(_.getAttribute("data-range"));if(b){var P=c.split(/\r\n?|\n/g),y=b[0],w=b[1]==null?P.length:b[1];y<0&&(y+=P.length),y=Math.max(0,Math.min(y-1,P.length)),w<0&&(w+=P.length),w=Math.max(0,Math.min(w,P.length)),c=P.slice(y,w).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(y+1))}T.textContent=c,n.highlightElement(T)},function(c){_.setAttribute(l,E),T.textContent=c})}}),n.plugins.fileHighlight={highlight:function(_){for(var T=(_||document).querySelectorAll(C),r=0,a;a=T[r++];)n.highlightElement(a)}};var q=!1;n.fileHighlight=function(){q||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),q=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}})()})(be)),be.exports}var Ne=cn();Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;const un=({code:i,language:u="javascript",onCodeChange:n,onApply:g})=>{const[d,h]=v.useState(i),[f,l]=v.useState(!1),A=v.useRef(null);v.useEffect(()=>{h(i)},[i]);const j=D=>{h(D)},E=()=>{l(!1),d!==i&&(n(d),g(d))},C=()=>{l(!0)},S=D=>{try{return Ne.highlight(D,Ne.languages.javascript,"javascript")}catch{return D}};return e.jsxs("div",{className:"relative editable-code-block",children:[e.jsx("div",{ref:A,className:"max-h-96 overflow-y-auto rounded-lg border border-blue-500/30 bg-slate-900/90 backdrop-blur-sm",style:{fontFamily:"JetBrains Mono, monospace",fontSize:"13px"},children:e.jsx(ln,{value:d,onValueChange:j,highlight:S,onBlur:E,onFocus:C,padding:12,style:{fontFamily:"JetBrains Mono, monospace",fontSize:"13px",outline:"none",minHeight:"200px",color:"#e2e8f0",backgroundColor:"transparent"},textareaClassName:"outline-none resize-none scrollbar-thin scrollbar-thumb-blue-500/30 scrollbar-track-transparent",preClassName:"m-0"})}),e.jsx("style",{children:`
        .editable-code-block .token.comment,
        .editable-code-block .token.prolog,
        .editable-code-block .token.doctype,
        .editable-code-block .token.cdata {
          color: #6272a4;
        }
        .editable-code-block .token.punctuation {
          color: #f8f8f2;
        }
        .editable-code-block .token.property,
        .editable-code-block .token.tag,
        .editable-code-block .token.constant,
        .editable-code-block .token.symbol,
        .editable-code-block .token.deleted {
          color: #ff79c6;
        }
        .editable-code-block .token.boolean,
        .editable-code-block .token.number {
          color: #bd93f9;
        }
        .editable-code-block .token.selector,
        .editable-code-block .token.attr-name,
        .editable-code-block .token.string,
        .editable-code-block .token.char,
        .editable-code-block .token.builtin,
        .editable-code-block .token.inserted {
          color: #f1fa8c;
        }
        .editable-code-block .token.operator,
        .editable-code-block .token.entity,
        .editable-code-block .token.url,
        .editable-code-block .language-css .token.string,
        .editable-code-block .style .token.string {
          color: #ff79c6;
        }
        .editable-code-block .token.atrule,
        .editable-code-block .token.attr-value,
        .editable-code-block .token.keyword {
          color: #8be9fd;
        }
        .editable-code-block .token.function,
        .editable-code-block .token.class-name {
          color: #50fa7b;
        }
        .editable-code-block .token.regex,
        .editable-code-block .token.important,
        .editable-code-block .token.variable {
          color: #ffb86c;
        }
      `})]})},dn=({isOpen:i,code:u,prompt:n,uris:g=[],onCodeChange:d,onUrisChange:h,onRegenerate:f,onSave:l,onCancel:A,anchorElement:j})=>{const[E,C]=v.useState(g),[S,D]=v.useState(""),[q,k]=v.useState(!1),{refs:_,floatingStyles:T}=at({open:i,placement:"right-start",whileElementsMounted:i?lt:void 0,middleware:[ot({mainAxis:420,crossAxis:0}),st(),it({padding:8})]});v.useEffect(()=>{C(g)},[g]),v.useEffect(()=>{j&&i&&_.setReference(j)},[j,i,_]),v.useEffect(()=>{if(!i)return;const s=c=>{c.key==="Escape"&&A()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[i,A]);const r=()=>{if(S.trim()&&!E.includes(S.trim())){const s=[...E,S.trim()];C(s),h(s),console.log("URI added:",S.trim(),"Updated URIs:",s),D("")}},a=s=>{const c=E.filter(b=>b!==s);C(c),h(c),console.log("URI removed:",s,"Updated URIs:",c)},p=async()=>{k(!0);try{const c=await Qe(n,"GalaxyLayoutBody",["GalaxyZoomControls","GalacticMeasurements","GalaxyNavigationDialog","AllStarsLink"]);if(c.success&&c.code){const b=c.uris||E;C(b),d(c.code),h(b),f&&f(c.code,b)}}catch(s){console.error("Error regenerating code:",s)}finally{k(!1)}};return!i||!j?null:e.jsx(ct,{children:e.jsx("div",{ref:_.setFloating,style:T,className:"absolute z-[100] pointer-events-auto",children:e.jsxs("div",{className:"w-[500px] max-h-[80vh] p-6 backdrop-blur-xl bg-white/20 dark:bg-slate-900/20 border border-blue-500/30 dark:border-blue-400/30 shadow-2xl shadow-blue-500/20 rounded-lg overflow-y-auto relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 via-purple-500/5 to-pink-500/10 rounded-lg pointer-events-none"}),e.jsxs("div",{className:"relative z-10 space-y-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-semibold text-blue-300 dark:text-blue-400 mb-2",children:"Your setting"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-blue-300 dark:text-blue-400",children:"Prompt:"}),e.jsx("div",{className:"p-3 bg-slate-800/50 dark:bg-slate-900/50 border border-blue-500/30 dark:border-blue-400/30 rounded-lg text-sm text-slate-200 dark:text-slate-300",children:n})]}),e.jsx("div",{children:e.jsx(ne,{onClick:p,disabled:q,variant:"secondary",className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500",children:q?"Regenerating...":"Regenerate Code"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-blue-300 dark:text-blue-400",children:"JavaScript Code:"}),e.jsx(un,{code:u,language:"javascript",onCodeChange:d,onApply:d})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2 text-blue-300 dark:text-blue-400",children:"Applies to:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:E.map((s,c)=>e.jsxs("span",{className:"px-2 py-1 text-xs bg-blue-500/20 dark:bg-blue-400/20 border border-blue-500/30 dark:border-blue-400/30 rounded text-blue-200 dark:text-blue-300 flex items-center gap-1",children:[s,e.jsx("button",{onClick:()=>a(s),className:"ml-1 text-red-400 hover:text-red-300 transition-colors","aria-label":"Remove URI",children:"×"})]},c))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:S,onChange:s=>D(s.target.value),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),r())},placeholder:"Add URI (e.g., /project or /all-stars)",className:"flex-1 px-3 py-1.5 text-xs border border-blue-500/30 dark:border-blue-400/30 rounded-lg backdrop-blur-sm bg-white/10 dark:bg-slate-800/30 text-slate-200 dark:text-slate-300 placeholder:text-slate-400 dark:placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50"}),e.jsx(ne,{onClick:r,variant:"secondary",size:"sm",className:"bg-blue-500/20 hover:bg-blue-500/30 border-blue-500/30",children:"Add"})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(ne,{onClick:l,variant:"primary",className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500",children:"Save"}),e.jsx(ne,{onClick:A,variant:"secondary",className:"flex-1",children:"Cancel"})]})]})]})})})},Oe=128,Hn=({projectName:i="Project Name",initialZoom:u=100,minZoom:n=25,maxZoom:g=100,maxGalaxyContent:d=100,projectId:h})=>{const[f,l]=v.useState(u),[A,j]=v.useState(!1),E=v.useRef(!1),[C,S]=v.useState({width:window.innerWidth,height:window.innerHeight}),[D,q]=v.useState(!1),k=v.useRef(u),_=v.useRef({x:0,y:0}),T=v.useRef(!1),[r,a]=v.useState(null),[p,s]=v.useState(null),[c,b]=v.useState([]),[P,y]=v.useState(null),[w,F]=v.useState(null),[o,t]=v.useState(!1),[x,L]=v.useState(!1),R=v.useRef(null);v.useEffect(()=>{const m=()=>{q(window.location.pathname.includes("/all-stars"))};return m(),window.addEventListener("popstate",m),()=>window.removeEventListener("popstate",m)},[]),v.useEffect(()=>{const m=()=>{S({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),v.useEffect(()=>{const m=document.querySelector("#galaxy-space");if(m){const $=m;$.style.transition="transform 0.4s ease-out",$.style.transformOrigin="center center"}},[]),v.useEffect(()=>{_.current={x:window.scrollX||document.documentElement.scrollLeft,y:window.scrollY||document.documentElement.scrollTop};const m=100-f,$=Math.round(window.innerWidth+m*Oe/10),N=Math.round(window.innerHeight+m*Oe/10),B={width:Math.max(0,$),height:Math.max(0,N)};(B.width!==C.width||B.height!==C.height)&&S(B),ee(f,B),k.current=f},[f]),v.useEffect(()=>{if(f<=n&&!E.current&&!D?(j(!0),E.current=!0):f>n&&(E.current=!1),C.width===0||C.height===0)return;const m=window.innerWidth,$=window.innerHeight,N=f<=100?f/100:Math.min(f/100,d/100),B=document.querySelector("[data-galaxy-backgrounds]");if(B){const U=B,I=Math.max(C.width,m),Z=Math.max(C.height,$);U.style.width=`${I}px`,U.style.height=`${Z}px`}const Y=document.querySelector("#galaxy-space");if(Y){const U=Y;if(k.current!==u&&k.current!==f&&!T.current){T.current=!0;const I=U.style.transition;U.style.transition="none";const Z={x:window.scrollX||document.documentElement.scrollLeft,y:window.scrollY||document.documentElement.scrollTop},se={x:Z.x+window.innerWidth/2,y:Z.y+window.innerHeight/2},ce=k.current<=100?k.current/100:Math.min(k.current/100,d/100),ie=U.getBoundingClientRect(),et=Z.y+ie.top,we={x:Z.x+ie.left+ie.width/2,y:et+ie.height/2},ke={x:(se.x-we.x)/ce,y:(se.y-we.y)/ce};U.style.transform=`scale(${N})`,requestAnimationFrame(()=>{const pe=U.getBoundingClientRect(),Fe={x:window.scrollX||document.documentElement.scrollLeft,y:window.scrollY||document.documentElement.scrollTop},tt=Fe.y+pe.top,Ce={x:Fe.x+pe.left+pe.width/2,y:tt+pe.height/2},Ae={x:Ce.x+ke.x*N,y:Ce.y+ke.y*N},Ee={x:Ae.x-window.innerWidth/2,y:Ae.y-window.innerHeight/2};window.scrollTo({left:Math.max(0,Ee.x),top:Math.max(0,Ee.y),behavior:"auto"}),U.style.transition=I,T.current=!1})}else U.style.transform=`scale(${N})`,T.current=!1}},[C,f,n,d,D,u]);const ee=(m,$)=>{const N=new CustomEvent(ve.ZOOM_CHANGE,{detail:{zoom:m,virtualScreenSize:$}});window.dispatchEvent(N)},K=()=>{j(!1);const m=h?`/all-stars?galaxy=${h}`:"/all-stars";window.location.href=m},W=()=>{j(!1),l(n+1),E.current=!1},z=(m,$=1500)=>{const N=f,B=Date.now(),Y=()=>{const U=Date.now()-B,I=Math.min(U/$,1),Z=I<.5?2*I*I:1-Math.pow(-2*I+2,2)/2,se=N+(m-N)*Z;l(se),I<1&&requestAnimationFrame(Y)};requestAnimationFrame(Y)};v.useEffect(()=>{const m=$=>{const{targetZoom:N}=$.detail;typeof N=="number"&&z(N)};return window.addEventListener(ve.ZOOM_TO,m),()=>{window.removeEventListener(ve.ZOOM_TO,m)}},[f]);const O=()=>({zoom:f,showDialog:A,virtualScreenSize:C,isAllStarsPage:D}),M=m=>{l(m.zoom),j(m.showDialog),S(m.virtualScreenSize),q(m.isAllStarsPage)},G=(m,$=!1)=>{try{console.log("Executing personalization code:",{code:m.substring(0,200)+"...",isTestMode:$,currentZoom:f,currentUri:window.location.pathname+window.location.search});const N={zoom:f,setZoom:l,showDialog:A,setShowDialog:j,virtualScreenSize:C,setVirtualScreenSize:S,isAllStarsPage:D,setIsAllStarsPage:q,projectId:h,projectName:i,initialZoom:u,minZoom:n,maxZoom:g,maxGalaxyContent:d,hasShownDialogRef:E,previousZoomRef:k,scrollPositionRef:_,isZoomingRef:T,window,location:window.location};new Function(...Object.keys(N),m)(...Object.values(N)),console.log("Personalization code executed successfully. New zoom:",f),$&&(a(m),t(!0),L(!0),console.log("Test mode activated, popover should show"))}catch(N){console.error("Error executing personalization code:",N)}},H=(m,$,N,B)=>{console.log("applyTestCode called with:",{code:m,prompt:$,uris:N,personalizationId:B});const Y=O();F(Y),s($),a(m),b(N||[]),y(B||null),G(m,!0)},J=m=>{console.log("Loading personalization into test mode:",m),H(m.code,m.prompt,m.uris,m._id)},Q=m=>{a(m),G(m,!0)},V=m=>{console.log("URIs changed in test mode:",m),b(m)},te=(m,$)=>{a(m),b($),G(m,!0)},re=()=>{w&&M(w),a(null),s(null),b([]),y(null),F(null),t(!1),L(!1)},ae=async()=>{if(!r||!p){console.error("Cannot save: missing code or prompt",{testModeCode:!!r,testModePrompt:!!p});return}const m=c.length>0?c:[window.location.pathname+window.location.search];console.log("Saving personalization:",{codeLength:r.length,codePreview:r.substring(0,100),prompt:p,uris:m,urisCount:m.length,personalizationId:P,isUpdate:!!P});const $=await tn("GalaxyLayoutBody",r,p,m,P||void 0);console.log("Save result:",$),$.success?(console.log("Personalization saved successfully"),t(!1),L(!1),a(null),s(null),b([]),y(null),F(null)):(console.error("Failed to save personalization:",$.error),alert(`Failed to save personalization: ${$.error||"Unknown error"}`))};return v.useEffect(()=>{o&&r&&!x&&(console.log("Test mode activated, showing popover"),L(!0))},[o,r,x]),v.useEffect(()=>{if(o)return;const m=async()=>{try{const N=await Je("GalaxyLayoutBody"),B=window.location.pathname+window.location.search;console.log("Loading personalizations:",{currentUri:B,personalizationsCount:N.length,personalizations:N.map(U=>({uris:U.uris,prompt:U.prompt}))});const Y=N.find(U=>U.uris.some(I=>{const Z=B===I||B.includes(I)||I.includes(B)||I.includes("?")&&B.startsWith(I.split("?")[0]);return Z&&console.log("Found matching personalization:",{savedUri:I,currentUri:B,prompt:U.prompt,code:U.code.substring(0,100)+"..."}),Z}));Y?(console.log("Applying personalization:",{prompt:Y.prompt,code:Y.code,uris:Y.uris}),G(Y.code,!1)):console.log("No matching personalization found for URI:",B)}catch(N){console.error("Error loading personalizations:",N)}};m();const $=()=>{o||m()};return window.addEventListener("popstate",$),()=>window.removeEventListener("popstate",$)},[o]),e.jsxs(e.Fragment,{children:[e.jsx(Kt,{virtualScreenSize:C}),e.jsx(Ut,{initialZoom:f,onZoomChange:l,minZoom:n,maxZoom:g}),!D&&e.jsx(Ht,{projectId:h}),e.jsx(Gt,{projectName:i,isOpen:A,onConfirm:K,onCancel:W}),e.jsx(an,{onTestModeChange:t,onCodeGenerated:H,onLoadPersonalization:J,buttonRef:R,isTestMode:o}),r&&p&&e.jsx(dn,{isOpen:x,code:r,prompt:p,uris:c,onCodeChange:Q,onUrisChange:V,onRegenerate:te,onSave:ae,onCancel:re,anchorElement:R.current})]})};export{Hn as default};
