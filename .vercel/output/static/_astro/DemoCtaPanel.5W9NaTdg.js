import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as a}from"./index.DxhH1ShK.js";import{c as m}from"./utils.BnlJtBIq.js";import{u as D,D as N}from"./DemoCongratulationsDialog.CfNEZXcv.js";import{D as h,d as b,s as A}from"./demo.DsLEr97b.js";import{m as l}from"./proxy.DplwUDe6.js";import{A as C}from"./index.BMZ1dBRY.js";import"./confetti.module.Cx83yTHA.js";import"./PageLikePanel.BdB3gp9f.js";import"./Panel.n1yQPIfZ.js";import"./eventTypes.CfSurkCl.js";import"./ripple.CF16UbCB.js";import"./slot.BJ0WR7bA.js";import"./index.CqUFkXl9.js";import"./accordion.LYJqygqr.js";import"./accordion.C2pAN9g7.js";import"./use-controlled-state.pHAnEIiX.js";import"./index.BAmrU33k.js";import"./index.DQANnUHg.js";import"./createLucideIcon.C1tpinp8.js";import"./index.C9GdNTjf.js";import"./PanelAction.7HK8ne8S.js";import"./Button.CnXYplS9.js";import"./ElectricBorder.DAWLx7iV.js";import"./Link.DQs8_5h1.js";import"./virtual.VUcB3V37.js";import"./client.B9YBqyHK.js";const oe=({projectName:R,galaxyId:P})=>{const[n,c]=a.useState(!1),[s,g]=a.useState(""),[i,o]=a.useState(""),[u,p]=a.useState(!1),[x,f]=a.useState(!0),{showDialog:y,demoUsers:v,setShowDialog:w,handleSuccess:E}=D();a.useEffect(()=>{const t=()=>{f(!1)};return window.addEventListener(h.USER_CREATED,t),()=>{window.removeEventListener(h.USER_CREATED,t)}},[]),a.useEffect(()=>{b()&&f(!1)},[b]);const S=t=>{g(t.target.value)},j=t=>{if(t.key==="Enter"&&s.trim()){const d=t.currentTarget.closest("form");d&&d.requestSubmit()}},k=async t=>{if(t.preventDefault(),!s||!s.trim()){o("please write email address");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.trim())){o("please write email address");return}p(!0),o("");try{const r=await A(s.trim());r.success&&"users"in r&&r.users&&Array.isArray(r.users)?E(r.users,s.trim()):o("error"in r&&r.error||"Failed to start demo")}catch(r){o(r.message||"An error occurred. Please try again.")}finally{p(!1)}};return x?e.jsxs(l.div,{className:m("relative w-full max-w-md mx-auto -mt-20 z-11","backdrop-blur-md bg-white/30 dark:bg-slate-900/30","border border-slate-200/40 dark:border-slate-700/40","rounded-xl p-8","transition-all duration-300","hover:bg-white/40 dark:hover:bg-slate-900/40","hover:border-slate-300/60 dark:hover:border-slate-600/60","hover:shadow-2xl hover:shadow-blue-500/30","shadow-lg shadow-blue-500/10"),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),animate:{scale:n?1.02:1,y:x?n?-4:0:-20},exit:{opacity:0,y:-20},transition:{type:"spring",stiffness:300,damping:20},children:[n&&e.jsx(l.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10 rounded-xl pointer-events-none",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3}}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-6",children:[e.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 text-center",children:"Demo Try out"}),e.jsxs("form",{onSubmit:k,className:"w-full space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"email",name:"email",value:s,onChange:S,onKeyPress:j,placeholder:"Enter your email",className:m("flex-1 h-12 px-4 rounded-lg","bg-white/50 dark:bg-slate-800/50","border border-slate-300/50 dark:border-slate-600/50","text-slate-800 dark:text-slate-200","placeholder:text-slate-400 dark:placeholder:text-slate-500","focus:outline-none focus:ring-2 focus:ring-blue-500/50","focus:border-blue-500/50","transition-all duration-200",i&&"border-red-500/50 focus:ring-red-500/50 focus:border-red-500/50")}),e.jsx("button",{type:"submit",disabled:u,className:m("h-12 px-6 whitespace-nowrap rounded-lg font-medium transition-colors","bg-rose-500 text-white hover:bg-sky-500","disabled:opacity-50 disabled:cursor-not-allowed"),children:u?"Starting...":"Start"})]}),e.jsx(C,{children:i&&e.jsx(l.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"text-sm text-red-500 dark:text-red-400 text-center",children:typeof i=="string"?i:"An error occurred"})})]}),e.jsx(l.p,{className:"text-sm text-slate-600 dark:text-slate-400 text-center",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"You will start immediately."})]}),e.jsx(N,{isOpen:y,users:v,onClose:()=>w(!1)})]}):null};export{oe as default};
