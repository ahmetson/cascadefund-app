import{a as t}from"./virtual.VUcB3V37.js";import{R as c}from"./roadmap.DwIP75iC.js";import{P as i}from"./patch.CbMO86LR.js";import{i as a,g as o}from"./demo.DsLEr97b.js";async function y(r){try{return(await t.getVersionsByGalaxy({galaxyId:r})).data?.versions||[]}catch(e){return console.error("Error fetching versions:",e),[]}}async function E(r){try{const e=await t.getVersionById({versionId:r});return e.data?.success&&e.data.version?e.data.version:null}catch(e){return console.error("Error fetching version:",e),null}}async function p(r){try{const e=await t.createVersion(r);return e.data?.success&&e.data.version?(await a({email:r.email,expectedStep:3}),e.data.version):null}catch(e){return console.error("Error creating version:",e),null}}async function u(r){try{return!!(await t.updateVersionStatus(r)).data?.success}catch(e){return console.error("Error updating version status:",e),!1}}async function g(r,e){try{return!!(await t.updatePatches({versionId:r,patches:e})).data?.success}catch(s){return console.error("Error updating patches:",s),!1}}async function w(r){try{return(await t.removePatch(r)).data?.success?(window.dispatchEvent(new CustomEvent(i.PATCH_REMOVED,{detail:{patchId:r.patchId,versionId:r.versionId}})),!0):!1}catch(e){return console.error("Error removing patch:",e),!1}}async function I(r){try{return!!(await t.completePatch(r)).data?.success}catch(e){return console.error("Error completing patch:",e),!1}}async function l(r){try{if((await t.testPatch(r)).data?.success){if(r.tested){const s=o();s.email&&await a({email:s.email,expectedStep:6})}return!0}return!1}catch(e){return console.error("Error testing patch:",e),!1}}async function P(r,e,s){return l({versionId:r,patchId:e,tested:s})}async function V(r){try{const e=o();if(!e.email)return console.error("No demo email found"),!1;if(!(await t.closeIssuesByVersion({versionId:r.versionId,email:e.email})).data?.success)return console.error("Failed to close issues"),!1;if(!await u({versionId:r.versionId,status:"archived"}))return console.error("Failed to update version status"),!1;const n={versionId:r.versionId,tag:r.tag,galaxyId:r.galaxyId};return window.dispatchEvent(new CustomEvent(c.VERSION_RELEASED,{detail:n})),console.log("incrementing demo step for the 7th step after release version"),await a({email:e.email,expectedStep:7}),!0}catch(e){return console.error("Error releasing version:",e),!1}}export{I as a,g as b,p as c,V as d,y as e,E as g,P as m,w as r,u};
