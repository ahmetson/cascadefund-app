---
import Layout from "@/layouts/PanelViewLayout.astro";
import { MenuName } from "@/components/navbar/WorkNavbar.astro";
import Hyperspeed from "@/components/Hyperspeed";
import Space from "@/components/all-stars/Space";
import { mockUserStars } from "@/types/mock-data";
import type { Galaxy } from "@/types/galaxy";
import Link from "@/components/custom-ui/Link";

// Create mock galaxies array with x, y coordinates and project names
const mockGalaxies = [
  {
    x: 200,
    y: 150,
    projectName: "Project Alpha",
    projectId: "1",
    galaxyData: {
      name: "Project Alpha",
      stars: 120,
      sunshines: 500,
    } as Partial<Galaxy>,
    tags: ["Web3", "Open Source"],
    leaderboardPosition: 1,
  },
  {
    x: 450,
    y: 300,
    projectName: "Project Beta",
    projectId: "2",
    galaxyData: {
      name: "Project Beta",
      stars: 95,
      sunshines: 400,
    } as Partial<Galaxy>,
    tags: ["React", "TypeScript"],
    leaderboardPosition: 2,
  },
  {
    x: 700,
    y: 200,
    projectName: "Project Gamma",
    projectId: "3",
    galaxyData: {
      name: "Project Gamma",
      stars: 80,
      sunshines: 350,
    } as Partial<Galaxy>,
    tags: ["Frontend", "UI"],
    leaderboardPosition: 3,
  },
  {
    x: 100,
    y: 400,
    projectName: "Project Delta",
    projectId: "4",
    galaxyData: {
      name: "Project Delta",
      stars: 65,
      sunshines: 280,
    } as Partial<Galaxy>,
    tags: ["Backend", "API"],
    leaderboardPosition: 4,
  },
  {
    x: 850,
    y: 500,
    projectName: "Project Epsilon",
    projectId: "5",
    galaxyData: {
      name: "Project Epsilon",
      stars: 50,
      sunshines: 200,
    } as Partial<Galaxy>,
    tags: ["Mobile", "iOS"],
    leaderboardPosition: 5,
  },
  {
    x: 300,
    y: 600,
    projectName: "Project Zeta",
    projectId: "6",
    galaxyData: {
      name: "Project Zeta",
      stars: 45,
      sunshines: 180,
    } as Partial<Galaxy>,
    tags: ["Android", "Kotlin"],
    leaderboardPosition: 6,
  },
];
---

<Layout hideLinks={Object.keys(MenuName)}>
  <Hyperspeed
    effectOptions={{
      onSpeedUp: () => {},
      onSlowDown: () => {},
      distortion: "turbulentDistortion",
      length: 400,
      roadWidth: 10,
      islandWidth: 2,
      lanesPerRoad: 4,
      fov: 90,
      fovSpeedUp: 150,
      speedUp: 1.01,
      carLightsFade: 0.4,
      totalSideLightSticks: 12,
      lightPairsPerRoadWay: 20,
      shoulderLinesWidthPercentage: 0.05,
      brokenLinesWidthPercentage: 0.1,
      brokenLinesLengthPercentage: 0.5,
      lightStickWidth: [0.12, 0.5],
      lightStickHeight: [1.3, 1.7],
      movingAwaySpeed: [0.5, 1],
      movingCloserSpeed: [-1, -2],
      carLightsLength: [400 * 0.03, 400 * 0.2],
      carLightsRadius: [0.05, 0.14],
      carWidthPercentage: [0.3, 0.5],
      carShiftX: [-0.8, 0.8],
      carFloorSeparation: [0, 5],
      colors: {
        roadColor: 0x1a1a2e,
        islandColor: 0x1e1e3e,
        background: 0x0a0a1a,
        shoulderLines: 0xffd6e8,
        brokenLines: 0xffe5f0,
        leftCars: [0xffb3d9, 0xffcce6, 0xffd9f0],
        rightCars: [0xd4b3ff, 0xe6ccff, 0xf0d9ff],
        sticks: 0xffd6e8,
      },
    }}
    slot="background"
    className="fixed h-screen w-screen z-2 pointer-events-none opacity-40"
    client:load
  />

  <!-- Space component for moving stars and galaxies -->
  <div
    class="fixed top-0 left-0 w-screen h-screen z-10 pointer-events-none"
    id="galaxy-space"
    style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; transform-origin: center center;"
  >
    <Space
      client:only="react"
      users={mockUserStars}
      className="z-10"
      projectGalaxies={mockGalaxies}
    />
  </div>

  <!-- 404 Error Message -->
  <div
    slot="center"
    class="flex flex-col items-center justify-center min-h-[60vh] text-center space-y-8 px-4 relative z-20"
  >
    <h1
      class="text-6xl md:text-7xl lg:text-8xl font-bold text-slate-800 dark:text-slate-200"
    >
      404
    </h1>
    <p
      class="text-xl md:text-3xl text-slate-600 dark:text-slate-400 leading-relaxed max-w-2xl"
    >
      Your URI not recognized by Ara.
    </p>
    <div class="flex flex-col items-center gap-4 mt-8">
      <Link
        uri="/all-stars"
        className="text-lg font-medium underline underline-offset-4"
      >
        Check out all stars page to explore projects
      </Link>
      <span class="text-slate-500 dark:text-slate-500">or</span>
      <Link
        uri="/"
        className="text-lg font-medium underline underline-offset-4"
      >
        learn more about Ara: /main page
      </Link>
    </div>
  </div>
</Layout>

<style is:global>
  /* Ensure Space component container covers the viewport */
  #galaxy-space {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    overflow: hidden;
  }
</style>

